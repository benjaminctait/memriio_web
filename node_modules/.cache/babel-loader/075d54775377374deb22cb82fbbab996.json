{"ast":null,"code":"var _jsxFileName = \"/Users/bentait/Desktop/memriio/memriio_web/src/components/memorymodal/memorymodal.js\";\nimport React from 'react';\nimport tick from '../images/checkmark.png';\nimport tag from '../images/tag.png';\nimport author from '../images/author.png';\nimport x from '../images/x-symbol.png';\nimport left from '../images/chevron-left.png';\nimport right from '../images/chevron-right.png';\nimport './memorymodal.css';\nimport { getAllMemoryFiles, getTaggedPeople, getMemoryClouds, getMemorySearchWords, getCloudPeople, getUser } from '../memriioserver';\nimport { CheckBox, SubTag, ImageLabel } from '../buttons/buttons';\n\nclass MemoryModal extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      memory: null,\n      taggedPeople: [],\n      memoryClouds: [],\n      searchWords: [],\n      keywords: [],\n      // this is temporary   \n      memfiles: null,\n      cloudPeople: [],\n      userClouds: [],\n      activefile: null,\n      author: null\n    };\n\n    this.onHide = () => {\n      this.props.onHideModal(this.props.memory);\n    };\n\n    this.componentDidUpdate = (prevProps, prevState) => {\n      if (this.props.memory) {\n        if (!prevProps.memory || this.props.memory.memid !== prevProps.memory.memid) {\n          this.populateMemoryFiles(this.props.memfiles);\n          getUser(this.props.memory.userid, author => {\n            this.setState({\n              author: author\n            });\n            console.log('Author + ' + JSON.stringify(author));\n          });\n          getTaggedPeople(this.props.memory.memid, people => {\n            this.setState({\n              taggedPeople: people\n            });\n          });\n          getMemoryClouds(this.props.memory.memid, clouds => {\n            this.populateCloudInfo(clouds);\n          });\n          getMemorySearchWords(this.props.memory.memid, words => {\n            this.populateSearchWords(words);\n          });\n        }\n      }\n    };\n\n    this.getHeroFile = () => {\n      let hero = this.state.memfiles[0];\n      this.state.memfiles.map(memfile => {\n        if (memfile.ishero) {\n          hero = memfile;\n        }\n      });\n      return hero;\n    };\n\n    this.populateMemoryFiles = memfiles => {\n      this.state.memfiles = memfiles;\n      this.setState({\n        activefile: this.getHeroFile()\n      });\n    };\n\n    this.populateSearchWords = words => {\n      this.state.keywords = [];\n      words.map(worditem => {\n        this.state.keywords.push(worditem.keyword);\n      });\n      this.setState({\n        searchWords: words\n      });\n    };\n\n    this.populateCloudInfo = clouds => {\n      this.setState({\n        memoryClouds: clouds\n      });\n      getCloudPeople(clouds, people => {\n        this.setState({\n          cloudPeople: people\n        });\n      });\n    };\n\n    this.renderMemoryContent = () => {\n      const mem = this.props.memory;\n      const keywords = this.state.keywords.map((word, idx) => {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          className: \"wordListItem\",\n          key: 'k' + idx,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(CheckBox, {\n          checkedImg: tick,\n          label: word,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }\n        }));\n      });\n      const people = this.state.taggedPeople.map(p => {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          className: \"wordListItem\",\n          key: 't' + p.userid,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(ImageLabel, {\n          img: tag,\n          label: p.firstname + ' ' + p.lastname,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 36\n          }\n        }));\n      });\n\n      if (this.state.author) {\n        people.push( /*#__PURE__*/React.createElement(\"li\", {\n          key: 'a' + this.state.author.userid,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(ImageLabel, {\n          img: author,\n          label: this.state.author.firstname + ' ' + this.state.author.lastname,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 11\n          }\n        })));\n      }\n\n      const details = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"wordListItem\",\n        key: 'location',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ImageLabel, {\n        img: tag,\n        label: this.props.memory.location,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 32\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"wordListItem\",\n        key: 'sss',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ImageLabel, {\n        img: tag,\n        label: this.props.memory.createdon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 27\n        }\n      })));\n      people.reverse();\n\n      if (this.state.activefile) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"modalrow\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"imgcolumn\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          alt: \"memory\",\n          src: this.state.activefile.thumburl,\n          className: \"imgStyle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"infoColumn\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }\n        }, mem.title, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"f6 lh-copy i measure mt2 mid-gray\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }\n        }, mem.description), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"f6 lh-copy measure mt2 black\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }\n        }, \" \", mem.story, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"detailsColumn\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }\n        }, \"Tags \"), /*#__PURE__*/React.createElement(\"ul\", {\n          className: \"wordList\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }\n        }, \" \", keywords, \" \"), /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }\n        }, \"People\"), /*#__PURE__*/React.createElement(\"ul\", {\n          className: \"wordList\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }\n        }, \" \", people, \" \"), /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }\n        }, \"Details\"), /*#__PURE__*/React.createElement(\"ul\", {\n          className: \"wordList\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }\n        }, \" \", details, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"footer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          className: \"closeBtn\",\n          src: x,\n          onClick: this.onHide,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 21\n          }\n        }))));\n      } else {\n        return null;\n      }\n    };\n\n    this.goBack = e => {\n      console.log(e.target.value);\n    };\n\n    this.goForward = e => {\n      console.log(e.target.value);\n    };\n\n    this.renderCarouselControls = () => {\n      if (this.state.memfiles) {\n        const mem = this.props.memory;\n        const mfiles = this.state.memfiles;\n        const thumbs = mfiles.map((mfile, index) => {\n          return /*#__PURE__*/React.createElement(\"img\", {\n            key: 'thumb' + index,\n            className: \"thumb\",\n            src: mfile.thumburl,\n            onClick: index => {},\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 11\n            }\n          });\n        });\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"controlbox\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          className: \"closeBtn\",\n          src: left,\n          onClick: this.goBack,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 7\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"thumbArray\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 7\n          }\n        }, thumbs), /*#__PURE__*/React.createElement(\"img\", {\n          className: \"closeBtn\",\n          src: right,\n          onClick: this.goForward,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 7\n          }\n        }));\n      } else {\n        return null;\n      }\n    };\n  }\n\n  //------------------------------------------------------------------------\n  render() {\n    if (this.props.show) {\n      let memoryContent = this.renderMemoryContent();\n      let carouselControls = this.renderCarouselControls();\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"backdropStyle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modalStyle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, memoryContent, carouselControls));\n    } else {\n      return null;\n    }\n  } //------------------------------------------------------------------------\n\n\n}\n\n;\nexport default MemoryModal;","map":{"version":3,"sources":["/Users/bentait/Desktop/memriio/memriio_web/src/components/memorymodal/memorymodal.js"],"names":["React","tick","tag","author","x","left","right","getAllMemoryFiles","getTaggedPeople","getMemoryClouds","getMemorySearchWords","getCloudPeople","getUser","CheckBox","SubTag","ImageLabel","MemoryModal","Component","state","memory","taggedPeople","memoryClouds","searchWords","keywords","memfiles","cloudPeople","userClouds","activefile","onHide","props","onHideModal","componentDidUpdate","prevProps","prevState","memid","populateMemoryFiles","userid","setState","console","log","JSON","stringify","people","clouds","populateCloudInfo","words","populateSearchWords","getHeroFile","hero","map","memfile","ishero","worditem","push","keyword","renderMemoryContent","mem","word","idx","p","firstname","lastname","details","location","createdon","reverse","thumburl","title","description","story","goBack","e","target","value","goForward","renderCarouselControls","mfiles","thumbs","mfile","index","render","show","memoryContent","carouselControls"],"mappings":"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","sourcesContent":["import React from 'react';\nimport tick from '../images/checkmark.png'\nimport tag from '../images/tag.png'\nimport author from '../images/author.png'\nimport x from '../images/x-symbol.png'\nimport left from '../images/chevron-left.png'\nimport right from '../images/chevron-right.png'\nimport './memorymodal.css'\n\nimport {getAllMemoryFiles, \n  getTaggedPeople,\n  getMemoryClouds,\n  getMemorySearchWords, \n  getCloudPeople,\n  getUser,\n } from '../memriioserver'\nimport {CheckBox,SubTag,ImageLabel} from '../buttons/buttons'\n\n\n\nclass MemoryModal extends React.Component{\n\n    \n    state ={\n        memory:null,\n        taggedPeople:[],\n        memoryClouds:[],\n        searchWords:[], \n        keywords:[],    // this is temporary   \n        memfiles:null,\n        cloudPeople:[],\n        userClouds:[],\n        activefile:null,\n        author:null\n    }\n   \n\n    onHide = () =>{\n      this.props.onHideModal(this.props.memory)\n    }\n//---------------------------------------------------------------------------------\n\n  componentDidUpdate = (prevProps,prevState) =>{\n    \n    if(this.props.memory)\n    {\n      if(!prevProps.memory || this.props.memory.memid !== prevProps.memory.memid){\n        \n        this.populateMemoryFiles(this.props.memfiles)\n        getUser              (this.props.memory.userid,(author => {\n                                                              this.setState({author:author})\n                                                              console.log('Author + ' + JSON.stringify(author))\n                                                          }))\n        getTaggedPeople      (this.props.memory.memid,((people)=>{this.setState({taggedPeople:people})}))\n        getMemoryClouds      (this.props.memory.memid,((clouds)=>{this.populateCloudInfo(clouds)}))\n        getMemorySearchWords (this.props.memory.memid,((words =>{this.populateSearchWords(words)})))\n        \n        \n        \n      }      \n    }\n  }\n\n//---------------------------------------------------------------------------------\n\n  getHeroFile = () => {\n    let hero = this.state.memfiles[0]    \n    this.state.memfiles.map(memfile => {\n        if(memfile.ishero){           \n            hero = memfile\n        }\n    })\n    return hero\n  }\n//---------------------------------------------------------------------------------\n  populateMemoryFiles = (memfiles) => {\n\n    this.state.memfiles = memfiles\n    this.setState({\n        activefile:this.getHeroFile()\n    })\n  }\n//---------------------------------------------------------------------------------\n  populateSearchWords = (words) =>{\n    this.state.keywords = []\n    words.map(worditem =>{\n        this.state.keywords.push(worditem.keyword)\n    })\n    this.setState({searchWords:words})\n  }\n\n//------------------------------------------------------------------------\n\n  populateCloudInfo = (clouds) =>{\n\n    this.setState({memoryClouds:clouds})\n    getCloudPeople (clouds,((people)=>{this.setState({cloudPeople:people})}))   \n  }\n\n  //------------------------------------------------------------------------\n\n  render(){\n\n      \n    if(this.props.show){\n      let memoryContent = this.renderMemoryContent()\n      let carouselControls = this.renderCarouselControls()\n      return(\n        <div className= 'backdropStyle'>\n          <div className='modalStyle'>\n            {memoryContent}              \n            {carouselControls}\n          </div>\n        </div>\n      )\n    }else{\n      return null\n    }        \n}\n  \n//------------------------------------------------------------------------\n\nrenderMemoryContent = () => {\n    const mem = this.props.memory\n    const keywords  = this.state.keywords.map(\n        (word, idx) => {\n          return (\n            <li \n                className='wordListItem'\n                key={'k'+idx}>\n              <CheckBox \n                  checkedImg = {tick}\n                  label = {word}/>\n            </li>\n            )\n          })\n    const people  = this.state.taggedPeople.map(\n      p => {\n          return (\n            <li \n              className='wordListItem'\n              key={'t' + p.userid}><ImageLabel img = {tag} label = {p.firstname+' '+p.lastname}/>                                                        \n            </li>\n          )\n        })\n    if(this.state.author){\n      people.push(      \n        <li key={'a' + this.state.author.userid}>\n          <ImageLabel \n            img = {author}\n            label = {this.state.author.firstname + ' ' + this.state.author.lastname}/>\n        </li>\n      ) \n    }\n\n    const details = \n          <div>\n            <li \n              className='wordListItem'\n              key={'location'}><ImageLabel img = {tag} label = {this.props.memory.location}/>\n            </li>\n            <li \n              className='wordListItem'\n              key={'sss'}><ImageLabel img = {tag} label = {this.props.memory.createdon}/>\n            </li>\n            </div>\n    \n\n    people.reverse()                                \n\n    if(this.state.activefile){\n      return (\n          <div className='modalrow'>\n            \n            <div className='imgcolumn'>\n              <img \n                alt='memory' \n                src={this.state.activefile.thumburl} \n                className = 'imgStyle'\n              />\n            </div>\n\n            <div className = 'infoColumn'>\n              \n              <h4>{mem.title} </h4>\n              <p className=\"f6 lh-copy i measure mt2 mid-gray\">{mem.description}</p>\n              <p className=\"f6 lh-copy measure mt2 black\"> { mem.story } </p>\n\n            </div>  \n\n            <div className = 'detailsColumn'>\n              \n              <h4>Tags </h4>\n              <ul className='wordList' > { keywords } </ul>\n              <h4>People</h4>\n              <ul className='wordList' > { people   } </ul>\n              <h4>Details</h4>\n              <ul className='wordList' > { details   } </ul>\n              <div className='footer'>                        \n                    <img  \n                      className='closeBtn'                   \n                      src = {x}\n                      onClick={this.onHide} />  \n              </div>              \n            </div>  \n\n          </div>\n      )\n    } else {\n      return null\n    }\n    \n  }\n\n//------------------------------------------------------------------------\n\ngoBack = (e) => {\n  console.log(e.target.value);\n\n}\n\ngoForward = (e) => {\n  console.log(e.target.value);\n}\n\nrenderCarouselControls = () => {\n  if(this.state.memfiles)\n  {\n    const mem = this.props.memory\n    const mfiles = this.state.memfiles\n    const thumbs = mfiles.map((mfile,index) =>{\n        return(\n          <img key={'thumb'+index} className='thumb' src = {mfile.thumburl} onClick={(index) =>{}}/> \n        )})\n    \n    return (\n      <div className='controlbox'>\n      <img className='closeBtn' src = {left} onClick={this.goBack} /> \n      <div className='thumbArray'>\n          {thumbs}\n      </div> \n      <img className='closeBtn' src = {right} onClick={this.goForward} /> \n      </div>\n    )\n  }else{\n    return null\n  }\n}\n  \n\n};  \n\n\nexport default MemoryModal;\n\n\n"]},"metadata":{},"sourceType":"module"}