{"ast":null,"code":"import React from 'react';\nimport Compressor from 'compressorjs';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { format } from \"date-fns\";\nimport { array } from 'prop-types';\n\nfunction memriiolog(log, data) {\n  if (log) console.log(data);\n} //-------------------------------------------------------------------------------\n\n\nexport function getMemories_User_Words_Clouds(userid, words, cloudids) {\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_keywords_cloudids', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        words: words,\n        userid: userid,\n        cloudids: cloudids\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        resolve(res.data);\n      } else {\n        reject(res.error);\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function getMemories_User_Clouds(userid, cloudids) {\n  console.log('getMemories_User_Clouds - userid : ' + userid + ' cloudids : ' + cloudids);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_cloudids', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userid: userid,\n        cloudids: cloudids\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        resolve(res.data);\n      } else {\n        reject(res.error);\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function getMemories_Clouds(cloudids) {\n  console.log('getMemories_Clouds - cloudids : ' + cloudids);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_memories_cloudids', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        cloudids: cloudids\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        resolve(res.data);\n      } else {\n        reject(res.error);\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function getMemories_Words_Clouds(cloudids, words) {\n  console.log('getMemories_Words_Clouds - cloudids : ' + cloudids);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_memories_cloudids', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        cloudids: cloudids,\n        words: words\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        resolve(res.data);\n      } else {\n        reject(res.error);\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function getMemories_PersonalOnly_All(userid, searchwords) {\n  console.log('getMemories_PersonalOnly_All - userid : ' + userid + ' searchwords : ' + searchwords);\n\n  if (isNonEmptyArray(searchwords)) {\n    console.log('getMemories_PersonalOnly_All - with searchwords');\n    return new Promise((resolve, reject) => {\n      fetch('https://memriio-api-0.herokuapp.com/get_memories_keywords_user_noclouds', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userid: userid,\n          words: searchwords\n        })\n      }).then(response => response.json()).then(res => {\n        if (res.success) {\n          resolve(res.data);\n        } else {\n          reject(res.error);\n        }\n      });\n    });\n  } else {\n    console.log('getMemories_PersonalOnly_All - no searchwords');\n    return new Promise((resolve, reject) => {\n      fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_noclouds', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userid: userid\n        })\n      }).then(response => response.json()).then(res => {\n        if (res.success) {\n          console.log('getMemories_PersonalOnly_All returns ' + res.data.length);\n          resolve(res.data);\n        } else {\n          reject(res.error);\n        }\n      });\n    });\n  }\n} //-------------------------------------------------------------------------------\n\nexport function getMemories_PersonalOnly_Unshared(userid, searchwords) {\n  if (searchwords) {\n    return new Promise((resolve, reject) => {\n      fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_keywords_noclouds_unshared', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userid: userid,\n          words: searchwords\n        })\n      }).then(res => {\n        if (res.success) {\n          resolve(res.data);\n        } else {\n          reject(res.error);\n        }\n      });\n    });\n  } else {\n    return new Promise((resolve, reject) => {\n      fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_noclouds_unshared', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userid: userid\n        })\n      }).then(response => response.json()).then(res => {\n        if (res.success) {\n          resolve(res.data);\n        } else {\n          reject(res.error);\n        }\n      });\n    });\n  }\n} //-------------------------------------------------------------------------------\n//--Returns and array of of images and related meta data from the server-----------------------------------------------\n\nexport function getAllMemoryFiles(memoryid, callback) {\n  memriiolog(false, 'Memriio.getAllMemoryFiles : memoryid ' + memoryid);\n  fetch('https://memriio-api-0.herokuapp.com/get_memfiles_memoryid', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'server response : ' + res.success);\n      memriiolog(false, 'server data : ' + JSON.stringify(res.data));\n      callback(res.data);\n    } else {\n      memriiolog(false, 'server response : ' + res.success + ' with ' + res.error);\n    }\n  });\n} //------------------------------------------------------------\n\nexport function getAllClouds() {\n  memriiolog(true, 'Memriio.getAllClouds');\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_clouds', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ignore: null\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        memriiolog(true, 'getAllClouds :server response : ' + res.success);\n        resolve(res.data);\n      } else {\n        memriiolog(true, 'getAllClouds :server response : ' + res.success + ' with ' + res.error);\n        reject(null);\n      }\n    });\n  });\n} //--Returns and array of {userid,firstname,lastname} objects from the server-----------------------------------------------\n\nexport function getTaggedPeople(memoryid, callback) {\n  memriiolog(false, 'Memriio.getTaggedPeople : memoryid ' + memoryid);\n  fetch('https://memriio-api-0.herokuapp.com/get_associatedpeople_memoryid', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'server response : ' + res.success);\n      memriiolog(false, 'server data : ' + JSON.stringify(res.data));\n      callback(res.data);\n    } else {\n      memriiolog(false, 'server response : ' + res.success + ' with ' + res.error);\n    }\n  });\n} //----------------------------------------------------------------------------------------------------------------------\n\nexport function getMemorySearchWords(memoryid, callback) {\n  memriiolog(false, 'Memriio.getMemorySearchWords : memoryid ' + memoryid);\n  fetch('https://memriio-api-0.herokuapp.com/get_searchwords_memid', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memid: memoryid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'getMemorySearchWords server response : ' + res.success);\n      callback(res.data);\n    } else {\n      memriiolog(false, 'getMemorySearchWords server response : ' + res.success + ' with ' + res.error);\n    }\n  });\n} //----------------------------------------------------------------------------------------------------------------------\n\nexport function setMemorySearchWords(memoryid, searchwords) {\n  memriiolog(false, 'Memriio.setMemorySearchWords : memoryid ' + memoryid + ' searchwords count = ' + searchwords.length);\n  fetch('https://memriio-api-0.herokuapp.com/set_searchwords_memid', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memid: memoryid,\n      searchwords: searchwords\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'setMemorySearchWords server response : ' + res.success);\n    } else {\n      memriiolog(false, 'setMemorySearchWords server response : ' + res.success + ' with ' + res.error);\n    }\n  });\n} //-------------------------------------------------------------------------------------------------------------------------\n\nexport function getMemoryClouds(memoryid, callback) {\n  memriiolog(false, 'Memriio.getMemoryclouds : memoryid ' + memoryid);\n  fetch('https://memriio-api-0.herokuapp.com/get_associatedclouds_memoryid', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'getMemoryclouds server response : ' + res.success);\n      memriiolog(false, 'getMemoryclouds response data : ' + JSON.stringify(res.data));\n      callback(res.data);\n    } else {\n      memriiolog(false, 'getMemoryclouds server response : ' + res.success + ' with ' + res.error);\n    }\n  });\n} //----------------------------------------------------------------------------------------------------------------\n\nexport function getAllUsers() {\n  memriiolog(false, 'Memriio.getAllUsers');\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_all_users', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        nothing: 'nothing'\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        memriiolog(false, 'getAllUsers server response : ' + res.success);\n        resolve(res.data);\n      } else {\n        memriiolog(false, 'getAllUsers server response : ' + res.success + ' with ' + res.error);\n        reject(null);\n      }\n    });\n  });\n} //--Returns and array of {userid,firstname,lastname} objects from the server-----------------------------------------------\n\nexport function getCloudPeople(clouds, callback) {\n  memriiolog(false, 'Memriio.getCloudPeople : clouds ' + JSON.stringify(clouds));\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_cloud_people_clouds', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        clouds: clouds\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        memriiolog(false, 'getCloudPeople server response : ' + res.success);\n        memriiolog(false, 'getCloudPeople response data : ' + JSON.stringify(res.data));\n        if (callback) callback(res.data);\n        resolve(res.data);\n      } else {\n        memriiolog(false, 'getCloudPeople server response : ' + res.success + ' with ' + res.error);\n        reject(null);\n      }\n    });\n  });\n} //------------------------------------------------------------\n\nexport function updateHeroImage(memoryid, heroImageid) {\n  memriiolog(false, 'Memriio.getAllImages : memoryid ' + memoryid);\n} //------------------------------------------------------------\n\nexport function updateTitle(memoryid, newTitle) {\n  memriiolog(false, 'Memriio.updateTitle : memoryid ' + memoryid + ' title : ' + newTitle);\n  fetch('https://memriio-api-0.herokuapp.com/set_memory_title', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid,\n      newTitle: newTitle\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'updateTitle : server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'updateTitle : server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function updateDescription(memoryid, newDescription) {\n  memriiolog(false, 'Memriio.updateDescription : memoryid ' + memoryid + ' description : ' + newDescription);\n  fetch('https://memriio-api-0.herokuapp.com/set_memory_description', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid,\n      newDescription: newDescription\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'updateDescription : server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'updateDescription : server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function deleteMemory(memoryid) {\n  memriiolog(false, 'Memriio.deleteMemory : memoryid ' + memoryid);\n  fetch('https://memriio-api-0.herokuapp.com/delete_memory', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'deleteMemory : server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'deleteMemory : server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function updateStory(memoryid, newStory) {\n  let len = 0;\n\n  if (newStory) {\n    len = newStory.length;\n  }\n\n  memriiolog(false, 'Memriio.updateStory : memoryid ' + memoryid + ' story.length : ' + len + ' chars');\n  fetch('https://memriio-api-0.herokuapp.com/set_memory_story', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid,\n      newStory: newStory\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'updateStory : server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'updateStory : server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function updateTaggedPeople(memoryid, taggedPeople) {} //------------------------------------------------------------\n\nexport function updateClouds(memoryid, clouds) {} //------------------------------------------------------------\n\nexport function updateMemword(searchword) {\n  memriiolog(false, 'Memriio.updateMemword :memword ' + JSON.stringify(searchword));\n  fetch('https://memriio-api-0.herokuapp.com/set_searchword', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      id: searchword.id,\n      memid: searchword.memid,\n      keyword: searchword.keyword,\n      strength: searchword.strength,\n      included: searchword.included\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'updateMemword :server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'updateMemword :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function updateCardType(memoryid, cardtype) {\n  memriiolog(false, 'Memriio.updateCardType : memoryid ' + memoryid + ' card type : ' + cardtype);\n  fetch('https://memriio-api-0.herokuapp.com/set_memory_cardtype', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid,\n      cardtype: cardtype\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'updateCardType :server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'updateCardType :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function updateLocation(memoryid, newLocation) {\n  memriiolog(false, 'Memriio.updateLocation : memoryid ' + memoryid + ' location : ' + newLocation);\n  fetch('https://memriio-api-0.herokuapp.com/set_memory_location', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memoryid: memoryid,\n      newLocation: newLocation\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'updateLocation :server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'updateLocation :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function addTaggedPerson(memoryid, userid) {\n  memriiolog(false, 'Memriio.addTaggedPerson : memoryid ' + memoryid + ' user : ' + userid);\n  fetch('https://memriio-api-0.herokuapp.com/associatePerson', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memid: memoryid,\n      userid: userid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'addTaggedPerson :server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'addTaggedPerson :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //------------------------------------------------------------\n\nexport function addTaggedCloud(memoryid, cloudid) {\n  memriiolog(false, 'Memriio.addTaggedCloud : memoryid ' + memoryid + ' clouid : ' + cloudid);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/associateGroup', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        memid: memoryid,\n        groupid: cloudid\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        memriiolog(false, 'addTaggedCloud :server response : ' + res.success);\n        resolve({\n          success: true,\n          data: res.data\n        });\n      } else {\n        memriiolog(false, 'addTaggedCloud :server response : ' + res.success + ' with ' + res.error);\n        reject({\n          success: false,\n          data: null,\n          error: res.error\n        });\n      }\n    });\n  });\n} //------------------------------------------------------------\n\nexport function deleteTaggedPerson(memoryid, userid) {\n  memriiolog(false, 'Memriio.deleteTaggedPerson : memoryid ' + memoryid + ' user : ' + userid);\n  fetch('https://memriio-api-0.herokuapp.com/removeTaggedPerson', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memid: memoryid,\n      userid: userid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'deleteTaggedPerson :server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'deleteTaggedPerson :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //---------------------------------------------------------------------------------------------------------------\n\nexport function deleteMemoryImage(memoryid, fileurl) {\n  memriiolog(false, 'Memriio.deleteMemoryImage : memoryid ' + memoryid + ' cloud : ' + fileurl);\n  fetch('https://memriio-api-0.herokuapp.com/removeFileFromMemory_fileurl', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memid: memoryid,\n      fileurl: fileurl\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'deleteMemoryImage :server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'deleteMemoryImage :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //---------------------------------------------------------------------------------------------------------------\n\nexport function setHeroImage(memoryid, fileurl) {\n  memriiolog(false, 'Memriio.setHeroImage : memoryid ' + memoryid + ' cloud : ' + fileurl);\n  fetch('https://memriio-api-0.herokuapp.com/setHeroImage_fileurl', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      memid: memoryid,\n      fileurl: fileurl\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'setHeroImage :server response : ' + res.success);\n      return true;\n    } else {\n      memriiolog(false, 'setHeroImage :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //---------------------------------------------------------------------------------------------------------------\n\nexport function deleteTaggedCloud(memoryid, cloudid) {\n  memriiolog(false, 'Memriio.deleteTaggedCloud : memoryid ' + memoryid + ' cloud : ' + cloudid);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/removeCloudFromMemory', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        memid: memoryid,\n        cloudid: cloudid\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        memriiolog(false, 'deleteTaggedCloud :server response : ' + res.success);\n        resolve(res.success);\n      } else {\n        memriiolog(false, 'deleteTaggedCloud :server response : ' + res.success + ' with ' + res.error);\n        reject(res.error);\n      }\n    });\n  });\n} //------------------------------------------------------------\n\nexport function getUser(userid, callback) {\n  memriiolog(false, 'Memriio.getUser : userid ' + userid);\n  fetch('https://memriio-api-0.herokuapp.com/getUser_userid', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      userid: userid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'getUser :server  : ' + res.data.userid + ' ' + res.data.firstname + ' ' + res.data.lastname);\n      callback(res.data);\n    } else {\n      memriiolog(false, 'getUser :server  : ' + res.status);\n    }\n  });\n} //------------------------------------------------------------\n\nexport function setUserMemberships(userid, cloudids) {\n  memriiolog(false, 'Memriio.updateUserClouds : userid ' + userid + ' clouds ' + stry(cloudids));\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/set_user_memberships', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userid: userid,\n        cloudids: cloudids\n      })\n    }).then(response => response.json()).then(res => {\n      if (res.success) {\n        memriiolog(false, 'updateUserClouds :server response : ' + res.success);\n        resolve(res.data);\n      } else {\n        memriiolog(false, 'updateUserClouds :server response : ' + res.success + ' with ' + res.error);\n        reject(res.error);\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function getUserClouds(userid, callback) {\n  memriiolog(false, 'Memriio.getUserClouds : userid ' + userid);\n  fetch('https://memriio-api-0.herokuapp.com/get_clouds_userid', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      userID: userid\n    })\n  }).then(response => response.json()).then(res => {\n    if (res.success) {\n      memriiolog(false, 'getUserClouds :server response : ' + res.success);\n      callback(res.data);\n      return true;\n    } else {\n      memriiolog(false, 'getUserClouds :server response : ' + res.success + ' with ' + res.error);\n      return false;\n    }\n  });\n} //-------------------------------------------------------------------------------\n\nexport function createMemoryID(userid, title, description, story, location) {\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/creatememory', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userid: userid,\n        description: description,\n        title: title,\n        story: story,\n        location: location\n      })\n    }).then(response => response.json()).then(memData => {\n      if (memData.created) {\n        console.log('memriio.createMemoryID : ' + memData.memid);\n        resolve(memData.memid);\n      } else {\n        console.log('memriio.createMemoryID : failed to create memory with title : ' + title);\n        reject('failed : unable to create memory');\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function getUserByEmail(email) {\n  memriiolog(false, 'Memriio.getUserByEmail : email ' + email);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_user_by_email', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: email\n      })\n    }).then(response => response.json()).then(response => {\n      if (response.success) {\n        resolve({\n          success: true,\n          data: response.data\n        });\n      } else {\n        reject({\n          success: false,\n          data: null,\n          err: response.err\n        });\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function getCloudMemberships() {\n  console.log('getCloudMemberships ');\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/get_cloud_memberships', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        nothing: null\n      })\n    }).then(response => response.json()).then(response => {\n      resolve({\n        data: response.data\n      });\n    }, error => {\n      reject({\n        error: error\n      });\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function deleteUser(user) {\n  console.log('deleteUser ' + stry(user.userid + ':' + user.firstname + ' ' + user.lastname));\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/delete_user', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userid: user.userid\n      })\n    }).then(response => response.json()).then(response => {\n      resolve({\n        data: response.success\n      });\n    }, error => {\n      reject({\n        error: error\n      });\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function setNewUser(user) {\n  console.log('setNewUser ' + stry(user.firstname + ' ' + user.lastname));\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/register', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: user.email,\n        password: user.password,\n        firstname: user.firstname,\n        lastname: user.lastname\n      })\n    }).then(response => response.json()).then(response => {\n      resolve({\n        data: response.data\n      });\n    }, error => {\n      reject({\n        error: error\n      });\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport async function getDownloadSignedurl(fileName) {\n  console.log('getsignedurl ' + fileName);\n  let ftype = getFileMime(fileName);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/getObject_signedurl', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        fileName: fileName,\n        fileType: ftype\n      })\n    }).then(response => response.json()).then(response => {\n      if (response.success) {\n        resolve({\n          success: true,\n          data: response.data\n        });\n      } else {\n        console.log('get signedurl ' + stry(response));\n        reject({\n          success: false,\n          data: null,\n          err: response.err\n        });\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport async function getUploadSignedurl(fileName) {\n  console.log('getUploadSignedurl ' + fileName);\n  let ftype = getFileMime(fileName);\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/putobject_signedurl', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        fileName: fileName,\n        fileType: ftype\n      })\n    }).then(response => response.json()).then(response => {\n      if (response.success) {\n        console.log(stry(response));\n        resolve({\n          success: true,\n          data: {\n            signedRequest: response.data.signedRequest,\n            awsurl: response.data.url\n          }\n        });\n      } else {\n        console.log('get signedurl ' + stry(response));\n        reject({\n          success: false,\n          data: null,\n          err: response.err\n        });\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nexport function uploadFile(fileName, buffer) {\n  let signedRequest = '';\n  let AWSurl = '';\n  let fileType = getFileMime(fileName);\n  return new Promise((resolve, reject) => {\n    getUploadSignedurl(fileName).then(result => {\n      if (result.success) {\n        signedRequest = result.data.signedRequest;\n        AWSurl = result.data.awsurl;\n        uploadToS3(buffer, signedRequest, fileType).then(result => {\n          if (result.success) {\n            resolve({\n              success: true,\n              awsurl: AWSurl\n            });\n          } else {\n            reject({\n              success: false,\n              data: null,\n              err: result.err\n            });\n          }\n        });\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------------------------\n\nexport function uploadFilePair(originalFileName, originalFileBuffer, thumbFileName, thumbFileBuffer) {\n  let originalSignedRequest = '';\n  let thumbSignedRequest = '';\n  let originalAWSurl = '';\n  let thumbAWSurl = '';\n  let origFileType = getFileMime(originalFileName);\n  let thumbFileType = getFileMime(thumbFileName);\n  return new Promise((resolve, reject) => {\n    getUploadSignedurl(originalFileName).then(result => {\n      if (result.success) {\n        originalSignedRequest = result.data.signedRequest;\n        originalAWSurl = result.data.awsurl;\n        getUploadSignedurl(thumbFileName).then(result => {\n          if (result.success) {\n            thumbSignedRequest = result.data.signedRequest;\n            thumbAWSurl = result.data.awsurl;\n            uploadToS3(originalFileBuffer, originalSignedRequest, origFileType).then(result => {\n              if (result.success) {\n                uploadToS3(thumbFileBuffer, thumbSignedRequest, thumbFileType).then(result => {\n                  if (result.success) {\n                    resolve({\n                      success: true,\n                      originalURL: originalAWSurl,\n                      thumbURL: thumbAWSurl\n                    });\n                  }\n                });\n              } else {\n                reject({\n                  success: false,\n                  data: null,\n                  err: result.err\n                });\n              }\n            });\n          } else {\n            reject({\n              success: false,\n              data: null,\n              err: result.err\n            });\n          }\n        });\n      } else {\n        reject({\n          success: false,\n          data: null,\n          err: result.err\n        });\n      }\n    });\n  });\n} //-------------------------------------------------------------------------------\n\nfunction uploadToS3(file, signedRequest, fileType) {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('PUT', signedRequest);\n    xhr.setRequestHeader('Content-Type', fileType);\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          resolve({\n            success: true,\n            data: xhr.responseURL\n          });\n        } else {\n          reject({\n            success: false,\n            data: null,\n            error: 'upload to aws s3 account failed'\n          });\n        }\n      }\n    };\n\n    xhr.send(file);\n  });\n} //-------------------------------------------------------------------------------\n\n\nexport function getFileMime(fileNameAndExtension) {\n  let extension = fileNameAndExtension.split('.')[1];\n  let mime = '';\n\n  switch (extension) {\n    case 'mov':\n      mime = 'video/quicktime';\n      break;\n\n    case 'jpg':\n      mime = 'image/jpeg';\n      break;\n\n    case 'jpeg':\n      mime = 'image/jpeg';\n      break;\n\n    case 'mp4':\n      mime = 'video/mp4';\n      break;\n\n    case 'png':\n      mime = 'image/png';\n      break;\n  }\n\n  return mime;\n} //-------------------------------------------------------------------------------\n\nexport function addFileToMemory(fileUrlObj, ishero, memoryid) {\n  let sourceURL = fileUrlObj.originalURL;\n  let thumbURL = fileUrlObj.thumbURL;\n  let sourceext = getExtension(sourceURL);\n  let thumbext = getExtension(thumbURL);\n  console.log('addFileToMemory : sourceURL ' + getFilename(sourceURL));\n  console.log('addFileToMemory : thumbURL ' + getFilename(thumbURL));\n  return new Promise((resolve, reject) => {\n    fetch('https://memriio-api-0.herokuapp.com/associateFile', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        memid: memoryid,\n        fileurl: sourceURL,\n        fileext: sourceext,\n        thumburl: thumbURL,\n        thumbext: thumbext,\n        ishero: ishero\n      })\n    }).then(response => response.json()).then(response => {\n      if (response.success) {\n        console.log('associate file : memid :' + memoryid + ' file : ' + sourceURL + ' hero shot = ' + ishero + ' ' + response.data.id);\n        resolve({\n          success: true,\n          data: response.data\n        });\n      } else {\n        reject({\n          success: false,\n          data: null\n        });\n      }\n    });\n  });\n} // ----------------------------------------------------------------------------\n\nexport function resizeImage(fileBuffer, targetWidth) {\n  return new Promise((resolve, reject) => {\n    new Compressor(fileBuffer, {\n      quality: 0.6,\n      convertSize: 0.3 * 1000000,\n      maxWidth: targetWidth,\n\n      success(result) {\n        console.log('resize success ' + result.size / 1000 + 'kb');\n        resolve({\n          success: true,\n          data: result\n        });\n      },\n\n      error(err) {\n        reject({\n          success: false,\n          data: null,\n          err: err\n        });\n      }\n\n    });\n  });\n} // ----------------------------------------------------------------------------\n\nexport function compressImage(fileBuffer, quality) {\n  return new Promise((resolve, reject) => {\n    new Compressor(fileBuffer, {\n      convertSize: 0.5 * 1000000,\n      quality: quality,\n\n      success(result) {\n        console.log('compress success ' + result.size / 1000 + 'kb');\n        resolve({\n          success: true,\n          data: result\n        });\n      },\n\n      error(err) {\n        console.log('compress fail ' + err);\n        reject({\n          success: false,\n          data: null,\n          err: err\n        });\n      }\n\n    });\n  });\n} // ----------------------------------------------------------------------------\n//----------------------- UTILITIES --------------------------------------------\n\nexport function canHandleDroppedFile(filename) {\n  let ext = getExtension(filename);\n  console.log(ext);\n  let filetypes = ['jpeg', 'JPEG', 'JPG', 'jpg', 'PNG', 'png'];\n  let found = filetypes.indexOf(ext);\n  return !(found === -1);\n}\nexport function getExtension(filepath) {\n  let fileParts = filepath.split('.');\n  let filetype = fileParts[fileParts.length - 1];\n  return filetype;\n}\nexport function getFilename(filepath) {\n  let parts = filepath.split('/');\n  let fname = parts[parts.length - 1];\n  return fname;\n}\nexport function stry(str) {\n  str = JSON.stringify(str);\n  if (str.charAt(0) === '\"') str = str.substr(1, str.length - 1);\n  if (str.charAt(str.length - 1) === '\"') str = str.substr(0, str.length - 1);\n  return str;\n}\nexport function getShortDate(longdate) {\n  var fdate = new Date(longdate);\n  return format(fdate, 'dd.MMM.yyyy');\n}\nexport function isEmailFormat(email) {\n  const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\nexport function isNonEmptyArray(arrayObj) {\n  if (arrayObj) {\n    if (Array.isArray(arrayObj)) {\n      if (arrayObj.length > 0) {\n        return true;\n      }\n    } else return false;\n  } else return false;\n}","map":{"version":3,"sources":["/Users/bentait/Desktop/memriio/memriio_web/src/components/memriioserver.js"],"names":["React","Compressor","unstable_batchedUpdates","format","array","memriiolog","log","data","console","getMemories_User_Words_Clouds","userid","words","cloudids","Promise","resolve","reject","fetch","method","headers","body","JSON","stringify","then","response","json","res","success","error","getMemories_User_Clouds","getMemories_Clouds","getMemories_Words_Clouds","getMemories_PersonalOnly_All","searchwords","isNonEmptyArray","length","getMemories_PersonalOnly_Unshared","getAllMemoryFiles","memoryid","callback","getAllClouds","ignore","getTaggedPeople","getMemorySearchWords","memid","setMemorySearchWords","getMemoryClouds","getAllUsers","nothing","getCloudPeople","clouds","updateHeroImage","heroImageid","updateTitle","newTitle","updateDescription","newDescription","deleteMemory","updateStory","newStory","len","updateTaggedPeople","taggedPeople","updateClouds","updateMemword","searchword","id","keyword","strength","included","updateCardType","cardtype","updateLocation","newLocation","addTaggedPerson","addTaggedCloud","cloudid","groupid","deleteTaggedPerson","deleteMemoryImage","fileurl","setHeroImage","deleteTaggedCloud","getUser","firstname","lastname","status","setUserMemberships","stry","getUserClouds","userID","createMemoryID","title","description","story","location","memData","created","getUserByEmail","email","err","getCloudMemberships","deleteUser","user","setNewUser","password","getDownloadSignedurl","fileName","ftype","getFileMime","fileType","getUploadSignedurl","signedRequest","awsurl","url","uploadFile","buffer","AWSurl","result","uploadToS3","uploadFilePair","originalFileName","originalFileBuffer","thumbFileName","thumbFileBuffer","originalSignedRequest","thumbSignedRequest","originalAWSurl","thumbAWSurl","origFileType","thumbFileType","originalURL","thumbURL","file","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","responseURL","send","fileNameAndExtension","extension","split","mime","addFileToMemory","fileUrlObj","ishero","sourceURL","sourceext","getExtension","thumbext","getFilename","fileext","thumburl","resizeImage","fileBuffer","targetWidth","quality","convertSize","maxWidth","size","compressImage","canHandleDroppedFile","filename","ext","filetypes","found","indexOf","filepath","fileParts","filetype","parts","fname","str","charAt","substr","getShortDate","longdate","fdate","Date","isEmailFormat","re","test","String","toLowerCase","arrayObj","Array","isArray"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Compressor from 'compressorjs'\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { format } from \"date-fns\";\nimport { array } from 'prop-types';\n\nfunction memriiolog(log,data) {\n    if(log) console.log(data)       \n}\n\n//-------------------------------------------------------------------------------\n\nexport function getMemories_User_Words_Clouds  (userid,words,cloudids)  { \n\n    return new Promise((resolve,reject) =>{\n        fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_keywords_cloudids', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({\n                    words:words,\n                    userid:userid,\n                    cloudids:cloudids\n                })\n            })\n            .then(response => response.json())\n            .then(res => {\n                if ( res.success ){\n                    resolve(res.data)  \n                }else{\n                    reject(res.error)\n                }\n            })\n    })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function getMemories_User_Clouds ( userid,cloudids)  {  \n\n    console.log('getMemories_User_Clouds - userid : ' + userid + ' cloudids : ' + cloudids);\n\n    return new Promise((resolve,reject)=>{\n        fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_cloudids', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({\n                    userid:userid,\n                    cloudids:cloudids\n                })\n            })\n            .then(response => response.json())\n            .then(res => {\n                if ( res.success ){\n                    resolve(res.data)  \n                }else{\n                    reject(res.error)\n                }\n            })\n    })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function getMemories_Clouds ( cloudids)  {  \n\n    console.log('getMemories_Clouds - cloudids : ' + cloudids);\n\n    return new Promise((resolve,reject)=>{\n        fetch('https://memriio-api-0.herokuapp.com/get_memories_cloudids', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({\n                    cloudids:cloudids\n                })\n            })\n            .then(response => response.json())\n            .then(res => {\n                if ( res.success ){\n                    resolve(res.data)  \n                }else{\n                    reject(res.error)\n                }\n            })\n    })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function getMemories_Words_Clouds ( cloudids,words)  {  \n\n    console.log('getMemories_Words_Clouds - cloudids : ' + cloudids);\n\n    return new Promise((resolve,reject)=>{\n        fetch('https://memriio-api-0.herokuapp.com/get_memories_cloudids', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({\n                    cloudids:cloudids,\n                    words:words\n                })\n            })\n            .then(response => response.json())\n            .then(res => {\n                if ( res.success ){\n                    resolve(res.data)  \n                }else{\n                    reject(res.error)\n                }\n            })\n    })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function getMemories_PersonalOnly_All (userid,searchwords) {\n    \n    console.log('getMemories_PersonalOnly_All - userid : ' + userid + ' searchwords : ' + searchwords);\n  \n    \n    if(isNonEmptyArray(searchwords)){\n\n        console.log('getMemories_PersonalOnly_All - with searchwords')\n        return new Promise((resolve,reject)=>{\n            fetch('https://memriio-api-0.herokuapp.com/get_memories_keywords_user_noclouds', {\n                method: 'post',\n                headers: {'Content-Type':'application/json'},\n                body:JSON.stringify({\n                        userid:userid,\n                        words:searchwords\n                    })\n                })\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        resolve(res.data)  \n                    }else{\n                        reject(res.error)\n                    }\n                })\n        })\n\n    }else{\n        console.log('getMemories_PersonalOnly_All - no searchwords')\n        return new Promise((resolve,reject)=>{\n            fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_noclouds', {\n                method: 'post',\n                headers: {'Content-Type':'application/json'},\n                body:JSON.stringify({\n                        userid:userid,\n                    })\n                })\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        console.log('getMemories_PersonalOnly_All returns ' + res.data.length )\n                        resolve(res.data)  \n                    }else{\n                        reject(res.error)\n                    }\n                })\n        })\n\n    }  \n\n}\n//-------------------------------------------------------------------------------\n\nexport function getMemories_PersonalOnly_Unshared (userid,searchwords)  {  \n\n    if(searchwords){\n        return new Promise((resolve,reject)=>{\n            fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_keywords_noclouds_unshared', {\n                method: 'post',\n                headers: {'Content-Type':'application/json'},\n                body:JSON.stringify({\n                        userid:userid,\n                        words:searchwords\n                    })\n                })\n                \n                .then(res => {\n                    if ( res.success ){\n                        resolve(res.data)  \n                    }else{\n                        reject(res.error)\n                    }\n                })\n        })\n\n    }else{\n        return new Promise((resolve,reject)=>{\n            fetch('https://memriio-api-0.herokuapp.com/get_memories_userid_noclouds_unshared', {\n                method: 'post',\n                headers: {'Content-Type':'application/json'},\n                body:JSON.stringify({\n                        userid:userid,\n                    })\n                })\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        resolve(res.data)  \n                    }else{\n                        reject(res.error)\n                    }\n                })\n        })\n\n    }  \n\n}\n//-------------------------------------------------------------------------------\n\n\n//--Returns and array of of images and related meta data from the server-----------------------------------------------\n\nexport function getAllMemoryFiles  (memoryid,callback) {\n   \n    memriiolog(false,'Memriio.getAllMemoryFiles : memoryid ' + memoryid )\n\n    \n    fetch('https://memriio-api-0.herokuapp.com/get_memfiles_memoryid', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('server response : ' + res.success))\n                        memriiolog(false,('server data : ' + JSON.stringify(res.data)))\n                        callback(res.data)\n                    }else{\n                        memriiolog(false,('server response : ' + res.success + ' with ' + res.error)) \n                    }\n                })\n\n}\n\n//------------------------------------------------------------\n\nexport function getAllClouds (){\n    memriiolog(true,('Memriio.getAllClouds'))\n  \n    return new Promise((resolve,reject) =>{\n        fetch('https://memriio-api-0.herokuapp.com/get_clouds', {\n            method: 'post',headers: {\n                'Content-Type':'application/json'},\n                body:JSON.stringify({ignore:null}) })\n                    .then(response => response.json())\n                    .then(res => {\n                        if ( res.success ){\n                            memriiolog(true,('getAllClouds :server response : ' + res.success))\n                            resolve(res.data)\n                        }else{\n                            memriiolog(true,('getAllClouds :server response : ' + res.success + ' with ' + res.error)) \n                            reject(null)\n                        }\n                    })\n    })\n}\n\n//--Returns and array of {userid,firstname,lastname} objects from the server-----------------------------------------------\n\nexport function getTaggedPeople  (memoryid,callback) {\n    memriiolog(false,('Memriio.getTaggedPeople : memoryid ' + memoryid ))\n   \n    \n    fetch('https://memriio-api-0.herokuapp.com/get_associatedpeople_memoryid', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('server response : ' + res.success))\n                        memriiolog(false,('server data : ' + JSON.stringify(res.data)))\n                        callback(res.data)\n                    }else{\n                        memriiolog(false,('server response : ' + res.success + ' with ' + res.error)) \n                    }\n                })\n\n}\n\n//----------------------------------------------------------------------------------------------------------------------\n\nexport function getMemorySearchWords  (memoryid,callback) {\n    memriiolog(false,('Memriio.getMemorySearchWords : memoryid ' + memoryid ))\n   \n    \n    fetch('https://memriio-api-0.herokuapp.com/get_searchwords_memid', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memid:memoryid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('getMemorySearchWords server response : ' + res.success))\n                        callback(res.data)\n                    }else{\n                        memriiolog(false,('getMemorySearchWords server response : ' + res.success + ' with ' + res.error)) \n                    }\n                })\n\n}\n\n//----------------------------------------------------------------------------------------------------------------------\n\nexport function setMemorySearchWords  (memoryid,searchwords) {\n    memriiolog(false,('Memriio.setMemorySearchWords : memoryid ' + memoryid + ' searchwords count = ' + searchwords.length))\n    \n    fetch('https://memriio-api-0.herokuapp.com/set_searchwords_memid', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memid:memoryid,searchwords:searchwords})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('setMemorySearchWords server response : ' + res.success))\n                    \n                    }else{\n                        memriiolog(false,('setMemorySearchWords server response : ' + res.success + ' with ' + res.error))\n                    }\n                })\n\n}\n\n\n//-------------------------------------------------------------------------------------------------------------------------\n\nexport function getMemoryClouds  (memoryid,callback) {\n    memriiolog(false,('Memriio.getMemoryclouds : memoryid ' + memoryid ))\n   \n    \n    fetch('https://memriio-api-0.herokuapp.com/get_associatedclouds_memoryid', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('getMemoryclouds server response : ' + res.success))\n                        memriiolog(false,('getMemoryclouds response data : ' + JSON.stringify(res.data)))\n                        callback(res.data)\n                    }else{\n                        memriiolog(false,('getMemoryclouds server response : ' + res.success + ' with ' + res.error))  \n                    }\n                })\n\n}\n//----------------------------------------------------------------------------------------------------------------\n\nexport function getAllUsers  () {\n    memriiolog(false,('Memriio.getAllUsers'  ))\n    \n    return new Promise((resolve,reject) =>{\n\n        fetch('https://memriio-api-0.herokuapp.com/get_all_users', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({nothing:'nothing'})})\n\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('getAllUsers server response : ' + res.success))                        \n                        resolve(res.data)\n\n                    }else{\n                        memriiolog(false,('getAllUsers server response : ' + res.success + ' with ' + res.error))\n                        reject(null)\n                    }\n                })\n\n    })\n    \n\n}\n\n//--Returns and array of {userid,firstname,lastname} objects from the server-----------------------------------------------\n\nexport function getCloudPeople  (clouds,callback) {\n    memriiolog(false,('Memriio.getCloudPeople : clouds ' + JSON.stringify(clouds) ))\n    \n    return new Promise((resolve,reject) =>{\n\n        fetch('https://memriio-api-0.herokuapp.com/get_cloud_people_clouds', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({clouds:clouds})})\n\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('getCloudPeople server response : ' + res.success))\n                        memriiolog(false,('getCloudPeople response data : ' + JSON.stringify(res.data)))\n                        if(callback) callback(res.data)\n                        resolve(res.data)\n\n                    }else{\n                        memriiolog(false,('getCloudPeople server response : ' + res.success + ' with ' + res.error))\n                        reject(null)\n                    }\n                })\n\n    })\n    \n\n}\n\n\n//------------------------------------------------------------\n\nexport function updateHeroImage (memoryid,heroImageid ){\n    memriiolog(false,('Memriio.getAllImages : memoryid ' + memoryid ))\n\n}\n\n//------------------------------------------------------------\n\nexport function updateTitle (memoryid,newTitle){\n    memriiolog(false,('Memriio.updateTitle : memoryid ' + memoryid + ' title : ' + newTitle))\n  \n    fetch('https://memriio-api-0.herokuapp.com/set_memory_title', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid,newTitle:newTitle})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('updateTitle : server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('updateTitle : server response : ' + res.success + ' with ' + res.error)) \n                        return false\n                    }\n                })\n\n}\n//------------------------------------------------------------\n\nexport function updateDescription (memoryid,newDescription){\n    memriiolog(false,('Memriio.updateDescription : memoryid ' + memoryid + ' description : ' + newDescription))\n  \n    fetch('https://memriio-api-0.herokuapp.com/set_memory_description', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid,newDescription:newDescription})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('updateDescription : server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('updateDescription : server response : ' + res.success + ' with ' + res.error))  \n                        return false\n                    }\n                })\n\n}\n//------------------------------------------------------------\n\nexport function deleteMemory (memoryid){\n    \n    memriiolog(false,('Memriio.deleteMemory : memoryid ' + memoryid ))\n  \n    fetch('https://memriio-api-0.herokuapp.com/delete_memory', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('deleteMemory : server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('deleteMemory : server response : ' + res.success + ' with ' + res.error))\n                        return false\n                    }\n                })\n\n}\n\n//------------------------------------------------------------\n\nexport function updateStory (memoryid,newStory){\n    let len = 0\n    if(newStory){len = newStory.length}\n    memriiolog(false,('Memriio.updateStory : memoryid ' + memoryid + ' story.length : ' + len + ' chars'))\n  \n    fetch('https://memriio-api-0.herokuapp.com/set_memory_story', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid,newStory:newStory})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('updateStory : server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('updateStory : server response : ' + res.success + ' with ' + res.error)) \n                        return false\n                    }\n                })\n\n\n}\n\n//------------------------------------------------------------\n\nexport function updateTaggedPeople (memoryid,taggedPeople){\n   \n    \n}\n\n//------------------------------------------------------------\n\nexport function updateClouds (memoryid,clouds){\n    \n\n}\n\n//------------------------------------------------------------\n\nexport function updateMemword(searchword){\n\n    memriiolog(false,('Memriio.updateMemword :memword ' + JSON.stringify(searchword)))\n  \n    fetch('https://memriio-api-0.herokuapp.com/set_searchword', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({id:searchword.id,\n                                     memid:searchword.memid,\n                                     keyword:searchword.keyword,\n                                     strength:searchword.strength,\n                                     included:searchword.included})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('updateMemword :server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('updateMemword :server response : ' + res.success + ' with ' + res.error))  \n                        return false\n                    }\n                })  \n   \n}\n\n//------------------------------------------------------------\n\nexport function updateCardType (memoryid,cardtype){\n\n    memriiolog(false,('Memriio.updateCardType : memoryid ' + memoryid + ' card type : ' + cardtype))\n  \n    fetch('https://memriio-api-0.herokuapp.com/set_memory_cardtype', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid,cardtype:cardtype})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('updateCardType :server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('updateCardType :server response : ' + res.success + ' with ' + res.error))\n                        return false\n                    }\n                })\n}\n\n//------------------------------------------------------------\n\nexport function updateLocation (memoryid,newLocation){\n    memriiolog(false,('Memriio.updateLocation : memoryid ' + memoryid + ' location : ' + newLocation))\n  \n    fetch('https://memriio-api-0.herokuapp.com/set_memory_location', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memoryid:memoryid,newLocation:newLocation})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('updateLocation :server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('updateLocation :server response : ' + res.success + ' with ' + res.error)) \n                        return false\n                    }\n                })\n}\n\n//------------------------------------------------------------\n\nexport function addTaggedPerson (memoryid,userid){\n    memriiolog(false,('Memriio.addTaggedPerson : memoryid ' + memoryid + ' user : ' + userid))\n  \n    fetch('https://memriio-api-0.herokuapp.com/associatePerson', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memid:memoryid,userid:userid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('addTaggedPerson :server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('addTaggedPerson :server response : ' + res.success + ' with ' + res.error))  \n                        return false\n                    }\n                })\n}\n\n//------------------------------------------------------------\n\nexport function addTaggedCloud (memoryid,cloudid){\n    memriiolog(false,('Memriio.addTaggedCloud : memoryid ' + memoryid + ' clouid : ' + cloudid))\n  \n    return new Promise((resolve,reject) =>{\n        fetch('https://memriio-api-0.herokuapp.com/associateGroup', {\n            method: 'post',headers: {\n                'Content-Type':'application/json'},\n                    body:JSON.stringify({memid:memoryid,groupid:cloudid})})\n                    .then(response => response.json())\n                    .then(res => {\n                        if ( res.success ){\n                            memriiolog(false,('addTaggedCloud :server response : ' + res.success))\n                            resolve({\n                                success:true,\n                                data:res.data\n                            })   \n                        }else{\n                            memriiolog(false,('addTaggedCloud :server response : ' + res.success + ' with ' + res.error)) \n                            reject({\n                                success:false,\n                                data:null,\n                                error:res.error\n                            })\n                        }\n                    })\n    })\n}\n\n\n//------------------------------------------------------------\n\nexport function deleteTaggedPerson (memoryid,userid){\n    memriiolog(false,('Memriio.deleteTaggedPerson : memoryid ' + memoryid + ' user : ' + userid))\n  \n    fetch('https://memriio-api-0.herokuapp.com/removeTaggedPerson', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memid:memoryid,userid:userid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('deleteTaggedPerson :server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('deleteTaggedPerson :server response : ' + res.success + ' with ' + res.error))  \n                        return false\n                    }\n                })\n}\n\n//---------------------------------------------------------------------------------------------------------------\n\nexport function deleteMemoryImage (memoryid,fileurl){\n    memriiolog(false,('Memriio.deleteMemoryImage : memoryid ' + memoryid + ' cloud : ' + fileurl))\n  \n    fetch('https://memriio-api-0.herokuapp.com/removeFileFromMemory_fileurl', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memid:memoryid,fileurl:fileurl})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('deleteMemoryImage :server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('deleteMemoryImage :server response : ' + res.success + ' with ' + res.error))\n                        return false\n                    }\n                })\n}\n\n//---------------------------------------------------------------------------------------------------------------\n\nexport function setHeroImage (memoryid,fileurl){\n    memriiolog(false,('Memriio.setHeroImage : memoryid ' + memoryid + ' cloud : ' + fileurl))\n  \n    fetch('https://memriio-api-0.herokuapp.com/setHeroImage_fileurl', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memid:memoryid,fileurl:fileurl})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('setHeroImage :server response : ' + res.success))\n                        return true\n                    }else{\n                        memriiolog(false,('setHeroImage :server response : ' + res.success + ' with ' + res.error)) \n                        return false\n                    }\n                })\n}\n\n//---------------------------------------------------------------------------------------------------------------\n\nexport function deleteTaggedCloud (memoryid,cloudid){\n    memriiolog(false,('Memriio.deleteTaggedCloud : memoryid ' + memoryid + ' cloud : ' + cloudid))\n    \n    return new Promise((resolve,reject) =>{\n    fetch('https://memriio-api-0.herokuapp.com/removeCloudFromMemory', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({memid:memoryid,cloudid:cloudid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('deleteTaggedCloud :server response : ' + res.success))\n                        resolve(res.success)\n                        }else{\n                        memriiolog(false,('deleteTaggedCloud :server response : ' + res.success + ' with ' + res.error))  \n                        reject(res.error)\n                    }\n                })\n    })\n}\n\n//------------------------------------------------------------\n\nexport function getUser (userid,callback){\n    memriiolog(false,('Memriio.getUser : userid ' + userid ))\n  \n    fetch('https://memriio-api-0.herokuapp.com/getUser_userid', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({userid:userid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success){\n                        memriiolog(false,('getUser :server  : ' + res.data.userid + ' ' + res.data.firstname + ' ' + res.data.lastname))\n                        callback(res.data)                        \n                    }else{\n                        memriiolog(false,('getUser :server  : ' + res.status ))                         \n                    }\n                })\n}\n\n//------------------------------------------------------------\n\nexport function setUserMemberships (userid,cloudids){\n\n    memriiolog(false,('Memriio.updateUserClouds : userid ' + userid + ' clouds ' + stry(cloudids)))\n    return new Promise((resolve,reject) =>{\n    fetch('https://memriio-api-0.herokuapp.com/set_user_memberships', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({userid:userid,cloudids:cloudids})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('updateUserClouds :server response : ' + res.success))\n                        resolve(res.data)\n                    }else{\n                        memriiolog(false,('updateUserClouds :server response : ' + res.success + ' with ' + res.error)) \n                        reject(res.error)\n                    }\n                })\n    })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function getUserClouds (userid,callback){\n    memriiolog(false,('Memriio.getUserClouds : userid ' + userid ))\n  \n    fetch('https://memriio-api-0.herokuapp.com/get_clouds_userid', {\n        method: 'post',headers: {\n            'Content-Type':'application/json'},\n                body:JSON.stringify({userID:userid})})\n                .then(response => response.json())\n                .then(res => {\n                    if ( res.success ){\n                        memriiolog(false,('getUserClouds :server response : ' + res.success))\n                        callback(res.data)\n                        return true\n                    }else{\n                        memriiolog(false,('getUserClouds :server response : ' + res.success + ' with ' + res.error)) \n                        return false\n                    }\n                })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function createMemoryID (userid,title,description,story,location)  {\n    \n    return new Promise((resolve,reject) => {\n        fetch('https://memriio-api-0.herokuapp.com/creatememory', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({\n                userid : userid,\n                description: description,\n                title : title,\n                story : story,\n                location : location\n                })\n        })\n        .then(response => response.json())\n        .then(memData => {\n            if(memData.created){\n                console.log('memriio.createMemoryID : ' + memData.memid);\n                resolve(memData.memid)\n            }  else {\n                console.log('memriio.createMemoryID : failed to create memory with title : ' + title);\n                reject('failed : unable to create memory')\n            }\n        })\n    })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function getUserByEmail ( email ){\n\n    memriiolog(false,('Memriio.getUserByEmail : email ' + email ))\n    return new Promise((resolve,reject) =>{\n        fetch('https://memriio-api-0.herokuapp.com/get_user_by_email', {\n            method: 'post',headers: {\n                'Content-Type':'application/json'},\n                    body:JSON.stringify({email:email})})\n                    .then(response => response.json())\n                    .then(response => {\n                        if ( response.success){\n                            resolve({\n                                success:true,\n                                data:response.data\n                            })                       \n                        }else{\n                            reject( {\n                                success:false,\n                                data: null,\n                                err:response.err\n                            })\n                        }\n                    })\n\n    })\n}\n\n//-------------------------------------------------------------------------------\nexport function getCloudMemberships ( ){\n    console.log('getCloudMemberships ')\n\n    return new Promise((resolve,reject) =>{\n        fetch('https://memriio-api-0.herokuapp.com/get_cloud_memberships', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({nothing:null})})\n                .then(response => response.json())\n                .then(response => \n                        {resolve({data:response.data})},\n                        error =>{reject({error:error})})\n        })\n}\n//-------------------------------------------------------------------------------\nexport function deleteUser ( user ){\n    console.log('deleteUser ' + stry(user.userid + ':' + user.firstname + ' ' + user.lastname));\n\n    return new Promise((resolve,reject) =>{\n        fetch('https://memriio-api-0.herokuapp.com/delete_user', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({userid:user.userid})})\n                .then(response => response.json())\n                .then(response => \n                        {resolve({data:response.success})},\n                        error =>{reject({error:error})})\n        })\n}\n\n//-------------------------------------------------------------------------------\nexport function setNewUser ( user ){\n    console.log('setNewUser ' + stry(user.firstname + ' ' + user.lastname));\n\n    return new Promise((resolve,reject) =>{\n        fetch('https://memriio-api-0.herokuapp.com/register', {\n            method: 'post',\n            headers: {'Content-Type':'application/json'},\n            body:JSON.stringify({\n                    email:user.email,\n                    password: user.password,\n                    firstname: user.firstname,\n                    lastname: user.lastname\n                    })\n                })\n                .then(response => response.json())\n                .then(response => \n                        {resolve({data:response.data})},\n                        error =>{reject({error:error})})\n        })\n}\n\n//-------------------------------------------------------------------------------\n\nexport async function getDownloadSignedurl (fileName) {\n    \n    console.log('getsignedurl ' + fileName);\n    let ftype = getFileMime(fileName)\n    \n    return new Promise((resolve,reject) => {\n        fetch('https://memriio-api-0.herokuapp.com/getObject_signedurl', {\n            method: 'post',headers: {\n                'Content-Type':'application/json'},\n                    body:JSON.stringify({fileName: fileName,fileType : ftype})})\n                    .then(response => response.json())\n                    .then(response => {\n                        if ( response.success){\n                            resolve({\n                                success:true,\n                                data:response.data\n                            })                       \n                        }else{\n                            console.log('get signedurl ' + stry(response))\n                            \n                            reject( {\n                                success:false,\n                                data: null,\n                                err:response.err\n                                \n                                \n                            })\n                        }\n                    })\n            })\n \n}\n\n//-------------------------------------------------------------------------------\n\nexport async function getUploadSignedurl (fileName) {\n    \n    console.log('getUploadSignedurl ' + fileName);\n    let ftype = getFileMime(fileName)\n    \n    return new Promise((resolve,reject) => {\n        fetch('https://memriio-api-0.herokuapp.com/putobject_signedurl', {\n            method: 'post',headers: {\n                'Content-Type':'application/json'},\n                    body:JSON.stringify({fileName: fileName,fileType : ftype})})\n                    .then(response => response.json())\n                    .then(response => {\n                        if ( response.success){\n                            console.log(stry(response)); \n                            \n                            resolve({\n                                success:true,\n                                data:{\n                                    signedRequest: response.data.signedRequest,\n                                    awsurl: response.data.url\n                                }\n                            })                       \n                        }else{\n                            console.log('get signedurl ' + stry(response))\n                            \n                            reject( {\n                                success:false,\n                                data: null,\n                                err:response.err\n                                \n                                \n                            })\n                        }\n                    })\n            })\n \n}\n//-------------------------------------------------------------------------------\nexport function uploadFile(fileName,buffer ){\n    let signedRequest = ''\n    let AWSurl = ''\n    let fileType = getFileMime(fileName)\n\n    return new Promise((resolve,reject)=>{\n        getUploadSignedurl(fileName)\n        .then(result =>{\n            if(result.success){\n                signedRequest = result.data.signedRequest\n                AWSurl = result.data.awsurl\n                uploadToS3(buffer,signedRequest,fileType)\n                .then(result => { \n                    if(result.success){\n                        resolve({\n                            success : true,\n                            awsurl: AWSurl,\n                        })\n                    }else{\n                        reject({\n                            success:false,\n                            data: null,\n                            err:result.err\n                        })    \n                    }\n                })        \n            }\n        })\n           \n    })\n}\n\n//-------------------------------------------------------------------------------------------------\n\nexport function uploadFilePair(originalFileName,originalFileBuffer,thumbFileName,thumbFileBuffer ){\n    let originalSignedRequest = ''\n    let thumbSignedRequest = ''\n    let originalAWSurl = ''\n    let thumbAWSurl = ''\n    let origFileType = getFileMime(originalFileName)\n    let thumbFileType = getFileMime(thumbFileName)\n\n    return new Promise((resolve,reject)=>{\n        getUploadSignedurl(originalFileName)\n        .then(result =>{\n            if(result.success){\n\n                originalSignedRequest = result.data.signedRequest\n                originalAWSurl = result.data.awsurl\n                \n                getUploadSignedurl(thumbFileName)\n                .then(result => {\n                    if(result.success){\n                        thumbSignedRequest = result.data.signedRequest\n                        thumbAWSurl = result.data.awsurl\n                        uploadToS3(originalFileBuffer,originalSignedRequest,origFileType)\n                        .then(result => {\n                            if(result.success){\n                            uploadToS3(thumbFileBuffer,thumbSignedRequest,thumbFileType)\n                            .then(result =>{\n                                if(result.success){\n                                    resolve({\n                                        success : true,\n                                        originalURL: originalAWSurl,\n                                        thumbURL : thumbAWSurl\n                                    })\n                                }   \n                             })\n                            }else{\n                                reject({\n                                    success:false,\n                                    data: null,\n                                    err:result.err\n                                })    \n                            }\n                         })\n                        \n                    }else{\n                        reject({\n                            success:false,\n                            data: null,\n                            err:result.err\n                        })\n                    }\n                })               \n            }else{\n                reject( {\n                    success:false,\n                    data: null,\n                    err:result.err\n                })\n            }\n           \n        })\n    })\n\n}\n\n//-------------------------------------------------------------------------------\n\nfunction uploadToS3  (file, signedRequest,fileType)  {\n    return new Promise((resolve,reject) => {\n        const xhr = new XMLHttpRequest();\n\n        xhr.open('PUT', signedRequest);\n        xhr.setRequestHeader('Content-Type', fileType) \n        xhr.onreadystatechange = () => {\n        if(xhr.readyState === 4){\n            if(xhr.status === 200){\n                resolve({\n                    success:true,\n                    data: xhr.responseURL\n                })\n            }\n            else{\n                reject({\n                    success:false,\n                    data:null,\n                    error:'upload to aws s3 account failed'\n                })\n            }\n        }\n        };\n        xhr.send(file);\n  })\n}\n\n//-------------------------------------------------------------------------------\n\nexport function getFileMime  (fileNameAndExtension)  {\n    let extension = fileNameAndExtension.split('.')[1]\n    \n    let mime =''\n    switch (extension) {\n        case 'mov': mime = 'video/quicktime' \n        break;\n        case 'jpg': mime = 'image/jpeg' \n        break;\n        case 'jpeg': mime = 'image/jpeg' \n        break;\n        case 'mp4': mime = 'video/mp4' \n        break;\n        case 'png': mime = 'image/png' \n        break;\n    }\n    return mime\n}\n\n//-------------------------------------------------------------------------------\n\n\nexport function addFileToMemory  (fileUrlObj,ishero,memoryid)  {\n    \n    \n    let sourceURL  = fileUrlObj.originalURL\n    let thumbURL   = fileUrlObj.thumbURL\n    \n    let sourceext   = getExtension( sourceURL )\n    let thumbext    = getExtension( thumbURL  )\n    \n    console.log('addFileToMemory : sourceURL ' + getFilename(sourceURL))\n    console.log('addFileToMemory : thumbURL ' + getFilename(thumbURL))\n    \n    return new Promise((resolve,reject) => {\n        fetch('https://memriio-api-0.herokuapp.com/associateFile', {\n            method: 'post',headers: {\n                'Content-Type':'application/json'},\n                    body:JSON.stringify({\n                        memid: memoryid,\n                        fileurl: sourceURL,\n                        fileext: sourceext,\n                        thumburl: thumbURL,\n                        thumbext: thumbext,\n                        ishero: ishero\n                        })\n                    })\n                    .then(response => response.json())\n                    .then(response => {\n                        if ( response.success){\n                            console.log('associate file : memid :'  + memoryid + ' file : ' +  sourceURL + ' hero shot = ' + ishero + ' ' + response.data.id);\n                            resolve({\n                                success:true,\n                                data:response.data\n                            })\n                        }else{\n                            reject({\n                                success:false,\n                                data:null\n                            })\n                        }\n                    })\n    })\n}\n// ----------------------------------------------------------------------------\n\nexport function resizeImage( fileBuffer,targetWidth ){\n\n    return new Promise((resolve,reject) => {\n        new Compressor(fileBuffer, \n            {\n                quality: 0.6,\n                convertSize: (0.3 * 1000000),\n                maxWidth:targetWidth,\n                success(result) {\n                    console.log('resize success ' + result.size/1000 + 'kb');\n                    resolve({success:true,data:result})},\n                error(err){reject({success:false,data:null,err:err})}\n            })\n     })\n}\n\n// ----------------------------------------------------------------------------\n\nexport function compressImage( fileBuffer,quality ){\n\n    return new Promise((resolve,reject) => {\n        new Compressor(fileBuffer, \n            {\n                convertSize: (0.5 * 1000000),\n                quality: quality,\n                success(result) {\n                    console.log('compress success ' + result.size/1000 + 'kb');\n                    \n                    resolve({success:true,data:result})\n                },\n                error(err){\n                    console.log('compress fail ' + err);\n                    \n                    reject({success:false,data:null,err:err})}\n            })\n     })\n}\n\n// ----------------------------------------------------------------------------\n\n//----------------------- UTILITIES --------------------------------------------\n\nexport function canHandleDroppedFile(filename){\n    let ext = getExtension(filename)\n    console.log(ext);\n    let filetypes = ['jpeg','JPEG','JPG','jpg','PNG','png']\n    let found = filetypes.indexOf(ext)\n    return !(found === -1) \n}\n\n\nexport function getExtension (filepath) {\n    let fileParts = filepath.split('.');\n    let filetype = fileParts[fileParts.length-1];\n    return filetype\n}\n\nexport function getFilename (filepath) {\n    let parts = filepath.split('/')\n    let fname = parts[parts.length-1]\n    return fname\n}\n\nexport function stry (str)  {\n    str = JSON.stringify(str)\n    if (str.charAt(0) === '\"') str = str.substr(1,str.length-1)    \n    if (str.charAt(str.length -1) === '\"') str = str.substr(0,str.length-1)\n    return str\n}\n\nexport function getShortDate(longdate) {\n    var fdate = new Date(longdate)\n    \n    return format(fdate,'dd.MMM.yyyy')\n}\n\nexport function isEmailFormat(email){\n    const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n\n}\n\nexport function isNonEmptyArray (arrayObj) {\n    if(arrayObj){\n        if(Array.isArray(arrayObj)){\n            if(arrayObj.length > 0){\n                return true\n            }\n        }else return false\n    }else return false\n}"]},"metadata":{},"sourceType":"module"}