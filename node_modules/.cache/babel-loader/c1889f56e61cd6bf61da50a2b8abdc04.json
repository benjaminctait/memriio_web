{"ast":null,"code":"var _jsxFileName = \"/Users/bentait/Desktop/memriio/memriio_web/src/components/cardcollection/card.js\";\nimport React from 'react';\nimport trash from '../images/trash.png';\nimport edit from '../images/edit.png';\nimport hero from '../images/heroshot.png';\nimport { getObjectSignedurl, getAllMemoryFiles } from '../memriioserver';\nimport ReactPlayer from 'react-player';\nimport './card.css'; //-----------------------------------------------------------------------------\n\nclass BaseCard extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      memfiles: null,\n      viewState: 0\n    };\n\n    this.handleEditCard = () => {\n      console.log('card-handleEditCard : memory.memid ' + this.props.memory.memid);\n      this.props.onEditClick(this.props.memory);\n    };\n\n    this.handleMoreClick = () => {\n      if (this.state.viewState === 0) this.setState({\n        viewState: 1\n      });else if (this.state.viewState === 1) this.setState({\n        viewState: 0\n      });\n    };\n\n    this.renderFileVIew = () => {\n      if (this.state.memfiles) {\n        let memf = this.getHeroFile();\n        return /*#__PURE__*/React.createElement(\"img\", {\n          alt: \"memory\",\n          src: memf.thumburl,\n          className: \"bigcardimg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 16\n          }\n        });\n      }\n    };\n\n    this.getHeroFile = () => {\n      let hero = this.state.memfiles[0];\n      console.log('getHeroFIle ' + hero);\n      this.state.memfiles.map(memfile => {\n        if (memfile.ishero) {\n          console.log('hero ' + memfile);\n          hero = memfile;\n        }\n      });\n      return hero;\n    };\n\n    this.loadFiles = memfiles => {\n      memfiles.forEach(memfile => {\n        console.log('memfile : ' + memfile);\n\n        if (memfile.fileext == 'mp4') {\n          let parts = memfile.fileurl.split('/');\n          let fname = parts[parts.length - 1];\n          getObjectSignedurl(fname).then(surl => {\n            memfile.fileurl = surl;\n          });\n        }\n      });\n      this.setState({\n        memfiles: memfiles\n      });\n    };\n\n    this.componentDidMount = () => {\n      console.log('didload : ');\n      getAllMemoryFiles(this.props.memory.memid, this.loadFiles);\n    };\n  }\n\n  //-----------------------------------------------------------------------------\n  render() {\n    const fileview = this.renderFileVIew();\n\n    if (this.state.viewState === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cardtype-0-state-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, fileview, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }\n      }, this.props.memory.title), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"f6 lh-copy measure mt2 mid-gray\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }\n      }, this.props.memory.description), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex justify-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"link dim mb2 ml2 lh-title bw1\",\n        onClick: this.handleMoreClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }\n      }, \"More\"), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"link dim mb2 mr2 lh-title bw1\",\n        onClick: this.handleEditCard,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }\n      }, \"[..]\"))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cardtype-0-state-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }\n      }, fileview, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }\n      }, this.props.memory.title), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"f6 lh-copy measure mt2 mid-gray\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }\n      }, this.props.memory.description), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex justify-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"link dim mb2 ml2 lh-title bw1\",\n        onClick: this.handleMoreClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 29\n        }\n      }, \"More\"), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"link dim mb2 mr2 lh-title bw1\",\n        onClick: this.handleCardExpand,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 29\n        }\n      }, \"[..]\"))));\n    }\n  }\n\n} //-----------------------------------------------------------------------------\n\n\nclass ShortCard extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      memfiles: null\n    };\n\n    this.renderFileVIew = () => {\n      if (this.state.memfiles) {\n        let memf = this.getHeroFile();\n        return /*#__PURE__*/React.createElement(\"img\", {\n          alt: \"memory\",\n          src: memf.thumburl,\n          className: \"br3 imgcover\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 16\n          }\n        });\n      }\n    };\n\n    this.getHeroFile = () => {\n      let hero = this.state.memfiles[0];\n      console.log('getHeroFIle ' + hero);\n      this.state.memfiles.map(memfile => {\n        if (memfile.ishero) {\n          console.log('hero ' + memfile);\n          hero = memfile;\n        }\n      });\n      return hero;\n    };\n\n    this.loadFiles = memfiles => {\n      memfiles.forEach(memfile => {\n        console.log('memfile : ' + memfile);\n\n        if (memfile.fileext == 'mp4') {\n          let parts = memfile.fileurl.split('/');\n          let fname = parts[parts.length - 1];\n          getObjectSignedurl(fname).then(surl => {\n            memfile.fileurl = surl;\n          });\n        }\n      });\n      this.setState({\n        memfiles: memfiles\n      });\n    };\n\n    this.componentDidMount = () => {\n      console.log('didload : ');\n      getAllMemoryFiles(this.props.memory.memid, this.loadFiles);\n    };\n\n    this.handleCardExpand = () => {\n      console.log('card-handleCardExpand : memory.memid ' + this.props.memory.memid);\n      this.props.onExpand(this.props.memory);\n    };\n  }\n\n  //-----------------------------------------------------------------------------\n  render() {\n    let fileview = this.renderFileVIew();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ba ma3 h-80p br3 mw5 minw5 shadow-5 pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, fileview, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"f6 lh-copy measure mt2 middlecenter white i\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }, this.props.memory.description), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex bottomcenter justify-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"link dim mb2 ml2 lh-title bw1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, \"More\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"link dim mb2 mr2 lh-title bw1\",\n      onClick: this.handleCardExpand,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, \"[..]\")));\n  }\n\n} //-----------------------------------------------------------------------------\n//  NEW CARD CLASS\n//\n//-----------------------------------------------------------------------------\n\n\nclass MemoryImage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileurl: null,\n      index: 0\n    };\n\n    this.handleClick = () => {\n      console.log('image clicked');\n    };\n\n    this.handleMakeHero = () => {\n      console.log('MemoryCard: handleMakeHero :' + this.props.memfile.fileurl);\n      this.props.setAsHero(this.props.memfile);\n    };\n\n    this.handleEditImage = () => {\n      console.log('edit image index :' + this.props.memfile.fileurl);\n    };\n\n    this.handleDeleteImage = () => {\n      console.log('delete image index :' + this.props.memfile.fileurl);\n      this.props.deleteImage(this.props.memfile);\n    };\n\n    this.renderEditControls = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bottomcenter self-center: center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"dib ma4 grow-large\",\n        src: hero,\n        alt: \"x\",\n        height: \"30\",\n        width: \"30\",\n        onClick: this.handleMakeHero,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"img\", {\n        className: \"dib ma4 grow-large\",\n        src: edit,\n        alt: \"x\",\n        height: \"30\",\n        width: \"30\",\n        onClick: this.handleEditImage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"img\", {\n        className: \"dib ma4 grow-large\",\n        src: trash,\n        alt: \"x\",\n        height: \"30\",\n        width: \"30\",\n        onClick: this.handleDeleteImage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }\n      }));\n    };\n\n    this.state = {\n      fileurl: props.fileurl,\n      fileext: props.fileext,\n      index: props.index\n    };\n    console.log('MemoryImage constructor : key' + this.props.index);\n  }\n\n  //-----------------------------------------------------------------------------\n  render() {\n    const controls = this.renderEditControls();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ma3 bg-black shadow-5 pointer \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"memory\",\n      src: this.props.memfile.fileurl,\n      className: \"vh-75 mvh75\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 17\n      }\n    }), \"''\", controls);\n  }\n\n} //-----------------------------------------------------------------------------\n\n\nexport { BaseCard, MemoryImage, ShortCard };","map":{"version":3,"sources":["/Users/bentait/Desktop/memriio/memriio_web/src/components/cardcollection/card.js"],"names":["React","trash","edit","hero","getObjectSignedurl","getAllMemoryFiles","ReactPlayer","BaseCard","Component","state","memfiles","viewState","handleEditCard","console","log","props","memory","memid","onEditClick","handleMoreClick","setState","renderFileVIew","memf","getHeroFile","thumburl","map","memfile","ishero","loadFiles","forEach","fileext","parts","fileurl","split","fname","length","then","surl","componentDidMount","render","fileview","title","description","handleCardExpand","ShortCard","onExpand","MemoryImage","constructor","index","handleClick","handleMakeHero","setAsHero","handleEditImage","handleDeleteImage","deleteImage","renderEditControls","controls"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport trash from '../images/trash.png'\nimport edit from '../images/edit.png'\nimport hero from '../images/heroshot.png'\nimport {getObjectSignedurl,getAllMemoryFiles} from '../memriioserver'\nimport ReactPlayer from 'react-player';\nimport './card.css';\n\n\n//-----------------------------------------------------------------------------\n\n\nclass BaseCard extends React.Component{\n\nstate = {\n    memfiles:null,\n    viewState:0\n}\n\n//------------------------------------------------------------------------------\n\nhandleEditCard = () =>{\n    console.log('card-handleEditCard : memory.memid ' + this.props.memory.memid);\n    this.props.onEditClick(this.props.memory)\n}\n\n//-----------------------------------------------------------------------------\n\nhandleMoreClick =() =>{\n    if(this.state.viewState === 0) this.setState({viewState:1})\n    else if(this.state.viewState === 1) this.setState({viewState:0})\n    \n}\n\n//-----------------------------------------------------------------------------\n\nrenderFileVIew = () => {\n\n    if(this.state.memfiles){\n        let memf = this.getHeroFile()\n        return <img alt='memory' src={memf.thumburl} className='bigcardimg'/>\n\n        \n    }\n}\n\n//-----------------------------------------------------------------------------\n\n// if (memf.fileext == 'jpg' || memf.fileext == 'jpeg'){\n//     return <img alt='memory' src={memf.thumburl} className='db br3 w-100 br--top'/>\n// }else if ( memf.fileext == 'mp4' ){\n//     if(memf.fileurl !== ''){\n//         return  (\n//             <ReactPlayer \n//                 url     = { memf.fileurl } \n//                 config  = {{file: {attributes: {poster: memf.thumburl}}}}\n//                 width   = { 400 }\n//                 height  = { 400 }\n//                 />            \n//         )}        \n// }\n\ngetHeroFile = () => {\n    let hero = this.state.memfiles[0]\n    console.log('getHeroFIle ' + hero);\n    this.state.memfiles.map(memfile => {\n        if(memfile.ishero){\n            console.log('hero ' + memfile);\n            hero = memfile\n        }\n    })\n    return hero\n}\n\n//-----------------------------------------------------------------------------\n\nloadFiles = (memfiles) => {\n\n    memfiles.forEach(memfile => {\n        console.log('memfile : ' + memfile);\n        \n        if(memfile.fileext == 'mp4'){\n            let parts = memfile.fileurl.split('/')\n            let fname = parts[parts.length-1]\n            getObjectSignedurl(fname).then( surl => {memfile.fileurl = surl})\n        }\n    })\n    this.setState({memfiles:memfiles})\n}\n\n//-----------------------------------------------------------------------------\n\ncomponentDidMount =  () => {\n    console.log('didload : ');\n    getAllMemoryFiles(this.props.memory.memid,this.loadFiles)\n}\n\n//-----------------------------------------------------------------------------\n\n    render(){\n        const fileview = this.renderFileVIew()\n        if(this.state.viewState === 0){\n            return (\n                <div className='cardtype-0-state-0'>\n                    {fileview}\n                    <div>\n                        <h3>{this.props.memory.title}</h3>\n                        <p className=\"f6 lh-copy measure mt2 mid-gray\">{this.props.memory.description}</p>\n                        <div className=\"flex justify-between\">\n                            <a className=\"link dim mb2 ml2 lh-title bw1\" onClick={this.handleMoreClick  } >More</a>\n                            <a className=\"link dim mb2 mr2 lh-title bw1\" onClick={this.handleEditCard } >[..]</a>\n    \n                        </div>\n                        \n                    </div>\n                </div>\n            )\n        }else{\n            return (\n                <div className='cardtype-0-state-1'>\n                    {fileview}\n                    <div>\n                        <h3>{this.props.memory.title}</h3>\n                        <p className=\"f6 lh-copy measure mt2 mid-gray\">{this.props.memory.description}</p>\n                        <div className=\"flex justify-between\">\n                            <a className=\"link dim mb2 ml2 lh-title bw1\" onClick={this.handleMoreClick  } >More</a>\n                            <a className=\"link dim mb2 mr2 lh-title bw1\" onClick={this.handleCardExpand } >[..]</a>\n    \n                        </div>\n                        \n                    </div>\n                </div>\n            )\n        }\n        \n    }\n\n}\n\n\n//-----------------------------------------------------------------------------\n\nclass ShortCard extends React.Component{\n\n\n    state = {\n        memfiles:null\n    }\n    //-----------------------------------------------------------------------------\n\n\nrenderFileVIew = () => {\n\n    if(this.state.memfiles) {\n        let memf = this.getHeroFile()\n        return <img alt='memory' src={memf.thumburl} className='br3 imgcover'/>\n    }\n    \n}\n// if(this.state.memfiles){\n//     let memf = this.getHeroFile()\n//     if (memf.fileext == 'jpg' || memf.fileext == 'jpeg'){\n//         return <img alt='memory' src={memf.thumburl} className='br3 imgcover'/>\n//     }else if ( memf.fileext == 'mp4' ){\n//         if(memf.fileurl !== ''){\n//             return  (\n//                 <ReactPlayer \n//                     url     = { memf.fileurl }                         \n//                     width   = { 350 }\n//                     height  = { 350 }\n//                     />            \n//             )}        \n//     }\n// }\n//-----------------------------------------------------------------------------\ngetHeroFile = () => {\n    let hero = this.state.memfiles[0]\n    console.log('getHeroFIle ' + hero);\n    this.state.memfiles.map(memfile => {\n        if(memfile.ishero){\n            console.log('hero ' + memfile);\n            hero = memfile\n        }\n    })\n    return hero\n}\n\n//-----------------------------------------------------------------------------\n\nloadFiles = (memfiles) => {\n\n    memfiles.forEach(memfile => {\n        console.log('memfile : ' + memfile);\n        \n        if(memfile.fileext == 'mp4'){\n            let parts = memfile.fileurl.split('/')\n            let fname = parts[parts.length-1]\n            getObjectSignedurl(fname).then( surl => {memfile.fileurl = surl})\n        }\n    })\n    this.setState({memfiles:memfiles})\n}\n\n//-----------------------------------------------------------------------------\n\ncomponentDidMount =  () => {\n    console.log('didload : ');\n    getAllMemoryFiles(this.props.memory.memid,this.loadFiles)\n}\n\nhandleCardExpand = () =>{\n    console.log('card-handleCardExpand : memory.memid ' + this.props.memory.memid);\n    \n    this.props.onExpand(this.props.memory)\n}\n\n//-----------------------------------------------------------------------------\n\n    render(){\n        let fileview = this.renderFileVIew()\n        return (\n            \n            <div className='ba ma3 h-80p br3 mw5 minw5 shadow-5 pointer'>\n                {fileview}\n                    <p className=\"f6 lh-copy measure mt2 middlecenter white i\">{this.props.memory.description}</p>\n                    <div className=\"flex bottomcenter justify-between\">\n                    <a className=\"link dim mb2 ml2 lh-title bw1\">More</a>\n                    <a className=\"link dim mb2 mr2 lh-title bw1\" onClick={this.handleCardExpand} >[..]</a>\n                </div>\n            </div>\n        )\n    }\n\n}\n\n//-----------------------------------------------------------------------------\n//  NEW CARD CLASS\n//\n//-----------------------------------------------------------------------------\n\nclass MemoryImage extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            fileurl:props.fileurl,\n            fileext: props.fileext,\n            index:props.index,\n        }\n        console.log('MemoryImage constructor : key' + this.props.index);\n        \n        \n    }\n    state={\n        fileurl:null,\n        index:0,\n    }\n\n//-----------------------------------------------------------------------------\n\nhandleClick = () =>{\n    console.log('image clicked')\n    \n}\n\n//-----------------------------------------------------------------------------\n\nhandleMakeHero = () =>{\n    console.log('MemoryCard: handleMakeHero :' + this.props.memfile.fileurl)\n    this.props.setAsHero(this.props.memfile)\n    \n}\n\n//-----------------------------------------------------------------------------\n\nhandleEditImage = () =>{\n    console.log('edit image index :' + this.props.memfile.fileurl)\n    \n}\n\n//-----------------------------------------------------------------------------\n\nhandleDeleteImage = () =>{\n    console.log('delete image index :' + this.props.memfile.fileurl)\n    this.props.deleteImage(this.props.memfile)\n    \n}\n\n//-----------------------------------------------------------------------------\n\nrenderEditControls = () => {\n    return(\n\n        <div className='bottomcenter self-center: center'>\n            <img \n                className = 'dib ma4 grow-large' \n                src={hero} alt=\"x\" \n                height=\"30\" \n                width=\"30\"\n                onClick={this.handleMakeHero}\n            ></img>\n            <img \n                className = 'dib ma4 grow-large' \n                src={edit} \n                alt=\"x\" \n                height=\"30\" \n                width=\"30\"\n                onClick={this.handleEditImage}\n            ></img>\n            <img  className = 'dib ma4 grow-large' \n                src={trash} \n                alt=\"x\" \n                height=\"30\" \n                width=\"30\"\n                onClick={this.handleDeleteImage}\n            ></img>\n        </div>\n    )\n}\n//-----------------------------------------------------------------------------\n\n    render(){\n        const controls = this.renderEditControls()\n        return (\n        \n            <div className='ma3 bg-black shadow-5 pointer '>\n                <img alt='memory' src={this.props.memfile.fileurl} className='vh-75 mvh75'/>''\n                {controls}\n                \n            </div>\n        )\n    }\n\n}\n\n//-----------------------------------------------------------------------------\n\nexport {BaseCard,MemoryImage,ShortCard};\n\n"]},"metadata":{},"sourceType":"module"}