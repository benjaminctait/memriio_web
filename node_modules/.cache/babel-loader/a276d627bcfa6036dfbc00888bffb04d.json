{"ast":null,"code":"var _jsxFileName = \"/Users/bentait/Desktop/memriio/memriio_web/src/components/navigation/navigation.js\";\nimport React from 'react';\nimport logo from \"./memriio_logo.png\";\nimport * as DropSearch from '../dropsearch/dropsearch';\nimport * as mem from '../memriioserver';\nimport './navigation.css';\n\nclass Navigation extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchwords: '',\n      userClouds: null,\n      selectedclouds: null,\n      showPersonalMemoryOptions: false,\n      personalMemoryunsharedOnly: false\n    };\n\n    this.onSearchBoxChange = event => {\n      console.log('navigation-onSearchBoxChange : ' + event.target.value);\n      let tmparray = [];\n\n      if (event.target.value !== '') {\n        tmparray = event.target.value.split(\" \");\n      }\n\n      this.setState({\n        searchwords: tmparray\n      });\n    };\n\n    this.handleChangeSearchClouds = (clouds, userid) => {\n      console.log('changesearchclouds : ' + mem.stry(clouds.map(cloud => {\n        return parseInt(cloud.value);\n      })));\n      this.setState({\n        selectedclouds: clouds\n      });\n    };\n\n    this.showMemories = () => {\n      let selected = this.state.selectedclouds;\n      let searchwords = this.state.searchwords;\n      let cloudids = [];\n      if (selected) cloudids = selected.map(cloud => {\n        return parseInt(cloud.value);\n      });\n\n      if (cloudids.length === 0) {\n        return this.props.loadMemories(null);\n      } else if (selected.length === 1 && selected[0].value === 0) {\n        // personal only\n        console.log('personal only ' + selected[0].value);\n\n        if (this.state.personalMemoryunsharedOnly) {\n          console.log('unshared ' + this.props.userid + ' ' + searchwords);\n          mem.getMemories_PersonalOnly_Unshared(this.props.userid, searchwords).then(response => response.json()).then(res => {\n            this.props.loadMemories(res.data);\n          }, error => {\n            this.props.loadMemories(null);\n          });\n        } else {\n          console.log('all ' + this.props.userid + ' ' + searchwords);\n          mem.getMemories_PersonalOnly_All(this.props.userid, searchwords).then(response => response.json()).then(res => {\n            this.props.loadMemories(res.data);\n          }, error => {\n            this.props.loadMemories(null);\n          });\n        }\n      } else {\n        // clouds other than just the personaly cloud\n        console.log('non personal clouds path');\n\n        if (searchwords.length > 0) {\n          // clouds + searchwords\n          console.log('non personal with searchwords ' + this.props.userid + ' ' + searchwords + ' ' + cloudids);\n          mem.getMemories_User_Words_Clouds(this.props.userid, searchwords, cloudids).then(response => response.json()).then(res => {\n            this.props.loadMemories(res.data);\n          }, error => {\n            this.props.loadMemories(null);\n          });\n        } else {\n          // clouds but no search words\n          console.log('non personal no searchwords ' + this.props.userid + ' ' + cloudids);\n          mem.getMemories_User_Clouds(this.props.userid, cloudids).then(response => response.json()).then(res => {\n            this.props.loadMemories(res.data);\n          }, error => {\n            this.props.loadMemories(null);\n          });\n        }\n      }\n    };\n\n    this.loadUserClouds = userid => {\n      if (userid) mem.getUserClouds(userid, clouds => {\n        clouds.push({\n          id: 0,\n          name: 'Personal',\n          administrator: this.props.userid\n        });\n        clouds.reverse();\n        this.setState({\n          userClouds: clouds\n        });\n      });\n    };\n\n    this.renderStandardNav = () => {\n      const {\n        onRouteChange,\n        userid\n      } = this.props;\n      let cloudbox = null;\n\n      if (this.state.userClouds) {\n        cloudbox = DropSearch.cloudDropSearch(this.state.userClouds, null, true, false, this.handleChangeSearchClouds, userid);\n      } else {\n        this.loadUserClouds(userid);\n      }\n\n      this.showMemories();\n      return /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"navBar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"floatRight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => onRouteChange(\"signout\"),\n        className: \"link dim dark-gray f4-ns dib mr3 mr4-ns pa2\",\n        href: \"#\",\n        title: \"Log Out\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }\n      }, \"Sign Out\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"floatRight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"link dim dark-gray f4-ns dib mr3 mr4-ns pa2\",\n        onClick: () => onRouteChange(\"admin\"),\n        href: \"#admin\",\n        title: \"Administration\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }\n      }, \"Admin\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"floatRight width50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.onSearchBoxChange,\n        className: \"border-box mt2 ba f4-ns b--black-30 pa2 br3 mb2\",\n        type: \"text\",\n        \"aria-describedby\": \"name-desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"floatRight width50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 17\n        }\n      }, cloudbox), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"floatLeft\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo,\n        className: \"logo\",\n        alt: \"memriio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }\n      }))));\n    };\n\n    this.renderSignInNav = () => {\n      const onRouteChange = this.props.onRouteChange;\n      return /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"navBar \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"logocell\",\n        href: \"#\",\n        title: \"Home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo,\n        className: \"logo\",\n        alt: \"memriio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dtc v-mid w-75 tr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => onRouteChange(\"signin\"),\n        className: \"link dim dark-gray f6 f4-ns dib\",\n        href: \"#\",\n        title: \"Log \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, \"Sign In\")));\n    };\n\n    this.renderAdminNav = () => {\n      const onRouteChange = this.props.onRouteChange;\n      return /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"navBar \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"logocell\",\n        href: \"#\",\n        title: \"Home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo,\n        className: \"logo\",\n        alt: \"memriio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dtc v-mid w-75 tr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => onRouteChange('home'),\n        className: \"link dim dark-gray f6 f4-ns dib\",\n        href: \"#\",\n        title: \"Home \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 17\n        }\n      }, \"Home\")));\n    };\n\n    this.state = {\n      searchwords: '',\n      userClouds: null,\n      selectedclouds: null\n    };\n  }\n\n  //---------------------------------------------------------------------------------\n  render() {\n    const {\n      userSignedin,\n      currentRoute\n    } = this.props;\n\n    if (userSignedin()) {\n      if (currentRoute === 'home') {\n        return this.renderStandardNav();\n      } else if (currentRoute === 'displayMemory') {\n        return null;\n      } else if (currentRoute === 'admin') {\n        return this.renderAdminNav();\n      }\n    } else {\n      return this.renderSignInNav();\n    }\n  } //---------------------------------------------------------------------------------\n  //---------------------------------------------------------------------------------\n\n\n}\n\nexport default Navigation;","map":{"version":3,"sources":["/Users/bentait/Desktop/memriio/memriio_web/src/components/navigation/navigation.js"],"names":["React","logo","DropSearch","mem","Navigation","Component","constructor","props","state","searchwords","userClouds","selectedclouds","showPersonalMemoryOptions","personalMemoryunsharedOnly","onSearchBoxChange","event","console","log","target","value","tmparray","split","setState","handleChangeSearchClouds","clouds","userid","stry","map","cloud","parseInt","showMemories","selected","cloudids","length","loadMemories","getMemories_PersonalOnly_Unshared","then","response","json","res","data","error","getMemories_PersonalOnly_All","getMemories_User_Words_Clouds","getMemories_User_Clouds","loadUserClouds","getUserClouds","push","id","name","administrator","reverse","renderStandardNav","onRouteChange","cloudbox","cloudDropSearch","renderSignInNav","renderAdminNav","render","userSignedin","currentRoute"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport logo from \"./memriio_logo.png\"\nimport * as DropSearch from '../dropsearch/dropsearch'\nimport * as mem from '../memriioserver'\n\nimport './navigation.css'\n\n\n\nclass Navigation extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state ={\n            searchwords:'',\n            userClouds:null,\n            selectedclouds:null\n        }\n    }\n\n    state={\n        searchwords:'',\n        userClouds:null,\n        selectedclouds:null,\n        showPersonalMemoryOptions:false,\n        personalMemoryunsharedOnly : false,\n            \n    }\n\n//---------------------------------------------------------------------------------    \n    \n    onSearchBoxChange = (event) =>{\n        console.log('navigation-onSearchBoxChange : ' + event.target.value)\n        let tmparray = []\n        \n        if(event.target.value !== ''){\n            tmparray = event.target.value.split(\" \")\n        }\n        this.setState({searchwords:tmparray})        \n    }\n\n//---------------------------------------------------------------------------------\n\nhandleChangeSearchClouds = (clouds,userid) =>{\n    console.log('changesearchclouds : ' + mem.stry(clouds.map(cloud => {return parseInt(cloud.value)})));\n    this.setState({selectedclouds:clouds})\n\n}\n\n//---------------------------------------------------------------------------------\n\nshowMemories = () =>{\n    let selected = this.state.selectedclouds\n    let searchwords = this.state.searchwords\n    let cloudids = []\n\n    if(selected) cloudids = selected.map(cloud => {return parseInt(cloud.value)})\n    \n    if(cloudids.length === 0){\n        \n        return this.props.loadMemories(null)\n\n    }else if (selected.length === 1 && selected[0].value === 0 ){  // personal only\n        console.log('personal only ' + selected[0].value);\n        if(this.state.personalMemoryunsharedOnly){\n            \n            console.log('unshared ' + this.props.userid + ' ' + searchwords);\n            mem.getMemories_PersonalOnly_Unshared(this.props.userid,searchwords)\n            .then(response => response.json())\n            .then(res => {this.props.loadMemories(res.data)}, \n                  error => {this.props.loadMemories(null)})\n\n        }else {\n            \n            console.log('all ' + this.props.userid + ' ' + searchwords);\n            mem.getMemories_PersonalOnly_All(this.props.userid,searchwords)\n            .then(response => response.json())\n            .then(res => {this.props.loadMemories(res.data)}, \n                  error => {this.props.loadMemories(null)})\n\n        }\n    }else{  // clouds other than just the personaly cloud\n        console.log('non personal clouds path' );\n \n        if(searchwords.length>0){  // clouds + searchwords\n            \n            console.log('non personal with searchwords ' + this.props.userid + ' ' + searchwords + ' ' + cloudids );\n            mem.getMemories_User_Words_Clouds(this.props.userid,searchwords,cloudids)\n            .then(response => response.json())\n            .then(res => {this.props.loadMemories(res.data)}, \n                  error => {this.props.loadMemories(null)})\n        \n        }else{  // clouds but no search words\n            \n            console.log('non personal no searchwords ' + this.props.userid + ' ' +  cloudids );\n            mem.getMemories_User_Clouds(this.props.userid,cloudids)            \n            .then(response => response.json())\n            .then(res => {this.props.loadMemories(res.data)}, \n                  error => {this.props.loadMemories(null)})\n        }\n    }\n    \n}\n\n//---------------------------------------------------------------------------------\n\nrender(){\n    const {userSignedin,currentRoute} = this.props\n    \n    if(userSignedin()){\n        if      (currentRoute === 'home')           { return ( this.renderStandardNav())\n        }else if(currentRoute === 'displayMemory')  { return ( null ) \n        }else if(currentRoute === 'admin')          { return ( this.renderAdminNav()) }\n            \n    }else{ return ( this.renderSignInNav())}\n}\n\n//---------------------------------------------------------------------------------\n\nloadUserClouds = (userid) => {    \n    if(userid) mem.getUserClouds(userid,(clouds => {\n        clouds.push({\n            id:0,\n            name:'Personal',\n            administrator:this.props.userid\n        })\n        clouds.reverse()\n        this.setState({userClouds:clouds})\n    }))\n}\n\n//---------------------------------------------------------------------------------\n\nrenderStandardNav =() =>{\n    const {onRouteChange,userid} = this.props\n    let cloudbox = null\n    if(this.state.userClouds){        \n        cloudbox = DropSearch.cloudDropSearch( this.state.userClouds,null,true,false , this.handleChangeSearchClouds,userid)\n    }else{\n        this.loadUserClouds(userid)\n    }\n    this.showMemories()\n    return(\n        <nav className='navBar'>\n            <ul>\n                <li className='floatRight'>\n                    <a  onClick={()=>onRouteChange(\"signout\")}\n                        className=\"link dim dark-gray f4-ns dib mr3 mr4-ns pa2\" \n                        href=\"#\" \n                        title=\"Log Out\">Sign Out</a>\n                </li>\n\n                <li className='floatRight'>\n                    <a className=\"link dim dark-gray f4-ns dib mr3 mr4-ns pa2\" \n                        onClick={()=>onRouteChange(\"admin\")}\n                        href=\"#admin\" \n                        title=\"Administration\">Admin</a>\n                </li>\n\n                <li className='floatRight width50'>\n                    <input \n                        onChange ={this.onSearchBoxChange}\n                        className = 'border-box mt2 ba f4-ns b--black-30 pa2 br3 mb2'\n                        type=\"text\" \n                        aria-describedby=\"name-desc\"></input>\n                </li>\n\n                <li className='floatRight width50'>\n                    {cloudbox}\n                </li>                \n                \n                <li className='floatLeft'>\n                    <img src={logo} className=\"logo\" alt=\"memriio\"></img>\n                </li>\n            </ul>\n        </nav>\n    )\n}\n\n//---------------------------------------------------------------------------------\n\nrenderSignInNav = () => {\n    const onRouteChange = this.props.onRouteChange\n    return (\n        <nav className=\"navBar \">\n            <div className=\"logocell\" href=\"#\" title=\"Home\">\n                <img src={logo} className=\"logo\" alt=\"memriio\"></img>\n            </div>\n            <div className=\"dtc v-mid w-75 tr\">\n                \n                <a  onClick={()=>onRouteChange (\"signin\")}\n                    className=\"link dim dark-gray f6 f4-ns dib\" \n                    href=\"#\" \n                    title=\"Log \">Sign In</a>\n                \n            </div>\n        </nav>\n    )\n}\n\n//---------------------------------------------------------------------------------\n\nrenderAdminNav = () => {\n    const onRouteChange = this.props.onRouteChange\n    return (\n        <nav className=\"navBar \">\n            <div className=\"logocell\" href=\"#\" title=\"Home\">\n                <img src={logo} className=\"logo\" alt=\"memriio\"></img>\n            </div>\n            <div className=\"dtc v-mid w-75 tr\">\n                \n                <a  onClick={()=>onRouteChange ('home')}\n                    className=\"link dim dark-gray f6 f4-ns dib\" \n                    href=\"#\" \n                    title=\"Home \">Home</a>\n                \n            </div>\n        </nav>\n    )\n}\n\n//---------------------------------------------------------------------------------\n\n}        \n    \n\n\nexport default Navigation;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}