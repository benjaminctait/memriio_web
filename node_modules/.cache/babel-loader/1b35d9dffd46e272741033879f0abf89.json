{"ast":null,"code":"var _jsxFileName = \"/Users/bentait/Desktop/memriio/memriio_web/src/components/memoryeditor/memoryeditor.js\";\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BaseCard, MemoryImage } from '../cardcollection/card';\nimport { SubTag } from '../buttons/buttons';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './memoryeditor.css';\nimport logo from \"../navigation/Logo_black.png\";\nimport { Icon, ICONS } from '../icons/icons';\nimport { getAllMemoryFiles, getTaggedPeople, getMemoryClouds, getCloudPeople, updateHeroImage, updateDescription, updateLocation, updateStory, updateTitle, deleteMemory } from '../memriioserver';\nimport { Container, Row, Col, Form, Carousel, Button, Dropdown, DropdownButton, Alert } from 'react-bootstrap';\n\nclass MemoryEditor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.titleChange = event => {\n      this.setState({\n        title: event.target.value,\n        uploadNeeded: true\n      });\n    };\n\n    this.descriptionChange = event => {\n      this.setState({\n        description: event.target.value,\n        uploadNeeded: true\n      });\n    };\n\n    this.locationChange = event => {\n      this.setState({\n        location: event.target.value,\n        uploadNeeded: true\n      });\n    };\n\n    this.storyChange = event => {\n      this.setState({\n        story: event.target.value,\n        uploadNeeded: true\n      });\n    };\n\n    this.handleExpandStory = () => {\n      const expanded = !this.state.storyExpanded;\n      this.setState({\n        storyExpanded: expanded\n      });\n      console.log('storyExpanded ' + this.state.storyExpanded);\n    };\n\n    this.updateClouds = clouds => {\n      this.setState({\n        memoryClouds: clouds\n      });\n      getCloudPeople(clouds, people => {\n        this.setState({\n          cloudPeople: people\n        });\n      });\n    };\n\n    this.handleDeleteMemory = () => {\n      console.log('handleDeleteMemory ' + this.state.id);\n      deleteMemory(this.state.id);\n      this.props.onRouteChange('memoryUpdated');\n    };\n\n    this.updateMemory = () => {\n      updateTitle(this.state.id, this.state.title);\n      updateDescription(this.state.id, this.state.description);\n      updateLocation(this.state.id, this.state.location);\n      updateStory(this.state.id, this.state.story);\n      this.props.onRouteChange('memoryUpdated');\n    };\n\n    this.addPerson = (userid, event) => {\n      let alreadyTagged = false;\n      let newArray = this.state.taggedPeople;\n      console.log('addPerson : userid ' + userid);\n      this.state.taggedPeople.map(person => {\n        if (person.id === userid) {\n          alreadyTagged = true;\n          console.log('tagged : ' + alreadyTagged);\n        }\n      });\n      console.log('addPerson : alreadytagged ' + alreadyTagged);\n      console.log('addPerson : !alreadytagged ' + !alreadyTagged);\n\n      if (!alreadyTagged) {\n        let p = this.getCloudPersonDetails(userid);\n        console.log('addPerson : person p ' + p);\n        if (p) newArray.push();\n        console.log('newarray : ' + newArray);\n        this.setState({\n          cloudPeople: newArray\n        });\n      }\n    };\n\n    this.getCloudPersonDetails = userid => {\n      let person = null;\n      this.state.cloudPeople.map(p => {\n        console.log('cloudpersonDetails : ' + JSON.stringify(p));\n        console.log('cloudpersonDetails : p.id ' + p.id + ' userid ' + userid);\n        console.log('cloudpersonDetails : logic ' + (p.id == userid));\n\n        if (p.id == userid) {\n          console.log('person : ' + JSON.stringify(p));\n          person = p;\n        }\n      });\n      return person;\n    };\n\n    console.log('location ' + props.memory.title);\n    this.state = {\n      id: props.memory.id,\n      title: props.memory.title,\n      description: props.memory.description,\n      story: props.memory.story,\n      location: props.memory.location,\n      owner: props.memory.userid,\n      fileurl: props.memory.fileurl,\n      taggedPeople: [],\n      memoryClouds: [],\n      searchWords: [],\n      memfiles: null,\n      cloudPeople: [],\n      uploadNeeded: false,\n      storyExpanded: false\n    };\n  } //------------------------------------------------------------------------\n\n\n  componentDidMount() {\n    getAllMemoryFiles(this.props.memory.id, memoryFiles => {\n      this.setState({\n        memfiles: memoryFiles\n      });\n    });\n    getTaggedPeople(this.props.memory.id, people => {\n      this.setState({\n        taggedPeople: people\n      });\n    });\n    getMemoryClouds(this.props.memory.id, clouds => {\n      this.updateClouds(clouds);\n    });\n  } //------------------------------------------------------------------------\n\n\n  //------------------------------------------------------------------------\n  render() {\n    let imageArray = [];\n    let upperform = null;\n    let lowerform = null;\n\n    if (this.state.memfiles) {\n      this.state.memfiles.map((item, index) => {\n        imageArray.push({\n          src: item.fileurl\n        });\n      });\n    } else {//do something else here\n    }\n\n    if (!this.state.storyExpanded) {\n      upperform = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        className: \"float-left W-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }\n      }, \"Title\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        value: this.state.title,\n        onChange: this.titleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Form.Label, {\n        className: \"float-left W-100 pt2 pb0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }\n      }, \"Description\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        value: this.state.description,\n        onChange: this.descriptionChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Form.Label, {\n        className: \"float-left W-100 pt2 pb0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 25\n        }\n      }, \"Location\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        value: this.state.location,\n        onChange: this.locationChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Form.Label, {\n        className: \"float-left W-100 pt2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 25\n        }\n      }, \"Tagged People\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dib  w-100 float-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 29\n        }\n      }, this.state.taggedPeople.map(person => {\n        let fullname = person.firstname + ' ' + person.lastname;\n        return /*#__PURE__*/React.createElement(SubTag, {\n          text: fullname,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 48\n          }\n        });\n      }), /*#__PURE__*/React.createElement(DropdownButton, {\n        id: \"dropdown-basic-button\",\n        size: \"sm\",\n        title: \"++\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 33\n        }\n      }, this.state.cloudPeople.map((person, index) => {\n        console.log('WTF ' + person.id);\n        console.log('WTF ts ' + person.id.toString());\n        return /*#__PURE__*/React.createElement(Dropdown.Item, {\n          eventKey: person.id.toString(),\n          onSelect: this.addPerson,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 45\n          }\n        }, person.firstname + ' ' + person.lastname);\n      }))), /*#__PURE__*/React.createElement(Form.Label, {\n        className: \"float-left W-100 pt2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 25\n        }\n      }, \"Memory Clouds\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dib  w-100 float-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 29\n        }\n      }, this.state.memoryClouds.map(cloud => {\n        return /*#__PURE__*/React.createElement(SubTag, {\n          text: cloud.name,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 48\n          }\n        });\n      })));\n      lowerform = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inline-flex w-100 justify-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        className: \" W-50 pt2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 29\n        }\n      }, \"Story\"), /*#__PURE__*/React.createElement(Icon, {\n        icon: ICONS.CHEVRON_UP,\n        onClick: this.handleExpandStory,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(Form.Control, {\n        as: \"textarea\",\n        rows: \"10\",\n        value: this.state.story,\n        onChange: this.storyChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 25\n        }\n      }));\n    } else {\n      upperform = null;\n      lowerform = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inline-flex w-100 justify-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        className: \" W-50 pt2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 29\n        }\n      }, \"Story\"), /*#__PURE__*/React.createElement(Icon, {\n        icon: ICONS.CHEVRON_DOWN,\n        onClick: this.handleExpandStory,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(Form.Control, {\n        as: \"textarea\",\n        rows: \"10\",\n        value: this.state.story,\n        onChange: this.storyChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 25\n        }\n      }));\n    }\n\n    if (this.props.memory && this.state.memfiles) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"dt w-100 border-box pa3 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"dtc v-mid f4-ns link dim dark-gray w-25 flex justify-left\",\n        href: \"#\",\n        title: \"Home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo,\n        className: \"w2 h2 \",\n        alt: \"Site Name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 29\n        }\n      }), \"memriio\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dtc v-mid w-75 tr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"link dim dark-gray f6 f4-ns dib mr3 mr4-ns pa2\",\n        onClick: () => this.props.onRouteChange(\"home\"),\n        href: \"#\",\n        title: \"Post\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 37\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"link dim dark-gray f6 f4-ns dib mr3 mr4-ns pa2\",\n        onClick: this.updateMemory,\n        href: \"#\",\n        title: \"Post\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 37\n        }\n      }, \"Update\"), /*#__PURE__*/React.createElement(\"a\", {\n        onClick: this.handleDeleteMemory,\n        className: \"link dim dark-gray f6 f4-ns dib\",\n        href: \"#\",\n        title: \"Login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 37\n        }\n      }, \"Delete\"))), /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: 5,\n        float: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Carousel, {\n        className: \"ba pa2 br3\",\n        autoPlay: false,\n        interval: 1200000,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 29\n        }\n      }, this.state.memfiles.map((item, i) => {\n        return /*#__PURE__*/React.createElement(Carousel.Item, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(MemoryImage, {\n          key: i,\n          index: i,\n          fileurl: item.fileurl,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 45\n          }\n        }));\n      }))), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"ba pa2 br3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 29\n        }\n      }, upperform, lowerform))), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Carousel, {\n        className: \"ba pa2 br3 \",\n        interval: 1200000,\n        nextIcon: /*#__PURE__*/React.createElement(Icon, {\n          icon: ICONS.CHEVRON_RIGHT,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 45\n          }\n        }),\n        prevIcon: /*#__PURE__*/React.createElement(Icon, {\n          icon: ICONS.CHEVRON_LEFT,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 45\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 29\n        }\n      }, this.state.memfiles.map((item, i) => {\n        return /*#__PURE__*/React.createElement(Carousel.Item, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(BaseCard, {\n          key: i,\n          memory: this.state,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 45\n          }\n        }));\n      }))))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 17\n        }\n      }, \"No Memory To Display\");\n    }\n  }\n\n} //------------------------------------------------------------------------    \n\n\nexport default MemoryEditor;","map":{"version":3,"sources":["/Users/bentait/Desktop/memriio/memriio_web/src/components/memoryeditor/memoryeditor.js"],"names":["React","useState","ReactDOM","BaseCard","MemoryImage","SubTag","logo","Icon","ICONS","getAllMemoryFiles","getTaggedPeople","getMemoryClouds","getCloudPeople","updateHeroImage","updateDescription","updateLocation","updateStory","updateTitle","deleteMemory","Container","Row","Col","Form","Carousel","Button","Dropdown","DropdownButton","Alert","MemoryEditor","Component","constructor","props","titleChange","event","setState","title","target","value","uploadNeeded","descriptionChange","description","locationChange","location","storyChange","story","handleExpandStory","expanded","state","storyExpanded","console","log","updateClouds","clouds","memoryClouds","people","cloudPeople","handleDeleteMemory","id","onRouteChange","updateMemory","addPerson","userid","alreadyTagged","newArray","taggedPeople","map","person","p","getCloudPersonDetails","push","JSON","stringify","memory","owner","fileurl","searchWords","memfiles","componentDidMount","memoryFiles","render","imageArray","upperform","lowerform","item","index","src","fullname","firstname","lastname","toString","cloud","name","CHEVRON_UP","CHEVRON_DOWN","i","CHEVRON_RIGHT","CHEVRON_LEFT"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport {BaseCard,MemoryImage} from '../cardcollection/card'\nimport {SubTag} from '../buttons/buttons'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './memoryeditor.css'\nimport logo from \"../navigation/Logo_black.png\"\nimport {Icon, ICONS} from '../icons/icons'\n\n\n\nimport {getAllMemoryFiles, \n        getTaggedPeople,\n        getMemoryClouds,\n        getCloudPeople,\n        updateHeroImage,\n        updateDescription,\n        updateLocation,\n        updateStory,\n        updateTitle,\n        deleteMemory,\n       \n       } from '../memriioserver'\n       \n\nimport {Container,\n        Row,\n        Col,\n        Form,\n        Carousel,\n        Button,\n        Dropdown,\n        DropdownButton,\n        Alert,\n        } from 'react-bootstrap'\n\n\nclass MemoryEditor extends React.Component{\n\n    constructor(props){\n        super(props);\n        console.log('location ' + props.memory.title);\n        \n        this.state = {\n                id:props.memory.id,\n                title:props.memory.title,\n                description:props.memory.description,\n                story:props.memory.story,\n                location:props.memory.location,\n                owner:props.memory.userid,\n                fileurl:props.memory.fileurl,\n\n                taggedPeople:[],\n                memoryClouds:[],\n                searchWords:[],\n                memfiles:null,\n                cloudPeople:[],\n        \n                uploadNeeded:false,\n                storyExpanded:false,\n            }\n            \n    }    \n\n    \n\n//------------------------------------------------------------------------\n\n    componentDidMount(){\n\n       \n        getAllMemoryFiles   (this.props.memory.id,((memoryFiles)=>{this.setState({memfiles:memoryFiles})}))\n        getTaggedPeople     (this.props.memory.id,((people)=>{this.setState({taggedPeople:people})}))\n        getMemoryClouds     (this.props.memory.id,((clouds)=>{this.updateClouds(clouds)}))\n        \n\n    }\n\n    \n\n//------------------------------------------------------------------------\n\ntitleChange         = (event) => {this.setState({title:event.target.value,uploadNeeded:true})}\ndescriptionChange   = (event) => {this.setState({description:event.target.value,uploadNeeded:true})}\nlocationChange      = (event) => {this.setState({location:event.target.value,uploadNeeded:true})}\nstoryChange         = (event) => {this.setState({story:event.target.value,uploadNeeded:true})}\nhandleExpandStory   =  ()   =>   {\n    const expanded = !this.state.storyExpanded\n    this.setState({storyExpanded:expanded})\n    console.log('storyExpanded ' + this.state.storyExpanded);\n    \n}\n\n//------------------------------------------------------------------------\n\nupdateClouds = (clouds) =>{\n\n    this.setState({memoryClouds:clouds})\n    getCloudPeople (clouds,((people)=>{this.setState({cloudPeople:people})}))\n\n    \n}\n//------------------------------------------------------------------------\n\nhandleDeleteMemory = () =>{\n    console.log('handleDeleteMemory ' + this.state.id);\n    deleteMemory(this.state.id)\n    this.props.onRouteChange('memoryUpdated')\n}\n\n//------------------------------------------------------------------------\n\nupdateMemory = () =>{\n\n    updateTitle         (this.state.id,this.state.title)\n    updateDescription   (this.state.id,this.state.description)\n    updateLocation      (this.state.id,this.state.location)\n    updateStory         (this.state.id,this.state.story)\n\n    this.props.onRouteChange('memoryUpdated')\n\n}\n\n//------------------------------------------------------------------------\n\naddPerson = (userid,event) =>{\n    let alreadyTagged = false\n    let newArray = this.state.taggedPeople\n    console.log('addPerson : userid ' + userid);\n    \n    this.state.taggedPeople.map(person =>{\n        \n       if(person.id === userid){\n            alreadyTagged = true\n            console.log('tagged : ' + alreadyTagged);\n        }\n    })\n            \n    console.log('addPerson : alreadytagged ' + alreadyTagged);\n    console.log('addPerson : !alreadytagged ' + !alreadyTagged);\n    \n    if(!alreadyTagged){\n        let p = this.getCloudPersonDetails(userid)\n        console.log('addPerson : person p ' + p);\n        if(p) newArray.push()\n        console.log('newarray : '+ newArray);\n        \n        this.setState({cloudPeople:newArray})\n    }\n\n}\n\n//------------------------------------------------------------------------\n\ngetCloudPersonDetails = (userid) =>{\n    let person = null\n    this.state.cloudPeople.map(p =>{\n        console.log('cloudpersonDetails : ' + JSON.stringify(p));\n        console.log('cloudpersonDetails : p.id ' + p.id + ' userid ' + userid)\n        \n        console.log('cloudpersonDetails : logic ' + (p.id == userid))\n        if(p.id == userid){\n            console.log('person : ' + JSON.stringify(p));\n            person = p    \n        }\n    })\n    return person\n}\n\n//------------------------------------------------------------------------\n\n\n    render(){\n        let imageArray = []\n        let upperform = null\n        let lowerform = null\n       \n        \n        if(this.state.memfiles){\n            this.state.memfiles.map((item,index)=>{imageArray.push({ src: item.fileurl})})\n        }else{\n            //do something else here\n        }\n        \n        if(!this.state.storyExpanded){\n            upperform = \n                    <div>\n                        <Form.Label className='float-left W-100' >Title</Form.Label>\n                        <Form.Control \n                            type=\"text\" \n                            value={this.state.title} \n                            onChange={this.titleChange}\n                        />\n\n                        <Form.Label className='float-left W-100 pt2 pb0'>Description</Form.Label>\n                        <Form.Control\n                            type=\"text\" \n                            value={this.state.description} \n                            onChange={this.descriptionChange}\n                            \n                        />\n                        \n                        <Form.Label className='float-left W-100 pt2 pb0'>Location</Form.Label>\n                        <Form.Control\n                            type=\"text\" \n                            value={this.state.location} \n                            onChange={this.locationChange}\n                        />\n                        \n                        <Form.Label className='float-left W-100 pt2'>Tagged People</Form.Label>\n                            <div className='dib  w-100 float-left'>\n                                {this.state.taggedPeople.map(person => {\n                                    let fullname = person.firstname + ' ' + person.lastname\n                                        return(<SubTag text={fullname} />)\n                                    })\n                                }\n                               \n                                <DropdownButton\n                                    id='dropdown-basic-button'\n                                    size=\"sm\"\n                                    title=\"++\"\n                                    >\n                                    {this.state.cloudPeople.map((person,index) => {\n                                        console.log('WTF ' + person.id)\n                                        console.log('WTF ts ' + person.id.toString())\n                                        return(\n                                            <Dropdown.Item \n                                                eventKey={person.id.toString()}\n                                                onSelect={this.addPerson}\n                                            >\n                                                {person.firstname + ' ' + person.lastname}\n                                            </Dropdown.Item>)})\n                                    } \n                                 </DropdownButton>\n                            </div>\n\n                        <Form.Label className='float-left W-100 pt2'>Memory Clouds</Form.Label>\n                            <div className='dib  w-100 float-left'>\n                                {this.state.memoryClouds.map(cloud => {\n                                        return(<SubTag text={cloud.name} />)\n                                    })\n                                }\n                            </div>\n                    </div>\n            lowerform = \n                    <div>\n                        <div className='inline-flex w-100 justify-between'>\n                            <Form.Label className=' W-50 pt2'>Story</Form.Label>\n                            <Icon icon={ICONS.CHEVRON_UP} onClick={this.handleExpandStory}/>\n                        </div>\n                        \n                        <Form.Control \n                            as=\"textarea\" \n                            rows='10' \n                            value={this.state.story} \n                            onChange={this.storyChange}\n                        />\n                    </div>\n\n        }else{\n            upperform = null\n            lowerform = \n                    <div>\n                        <div className='inline-flex w-100 justify-between'>\n                            <Form.Label className=' W-50 pt2'>Story</Form.Label>\n                            <Icon icon={ICONS.CHEVRON_DOWN} onClick={this.handleExpandStory}/>\n                        </div>\n                        \n                        <Form.Control \n                            as=\"textarea\" \n                            rows='10' \n                            value={this.state.story} \n                            onChange={this.storyChange}\n                        />\n                    </div>\n        }\n\n        if(this.props.memory && this.state.memfiles){\n            return (\n                <div>\n\n                    <nav className=\"dt w-100 border-box pa3 \">\n                            <a className=\"dtc v-mid f4-ns link dim dark-gray w-25 flex justify-left\" href=\"#\" title=\"Home\">\n                            <img src={logo} className=\"w2 h2 \" alt=\"Site Name\"></img>\n                                memriio</a>\n                                <div className=\"dtc v-mid w-75 tr\">\n                                    \n                                    <a className=\"link dim dark-gray f6 f4-ns dib mr3 mr4-ns pa2\" \n                                        onClick={()=>this.props.onRouteChange(\"home\")}\n                                        href=\"#\" \n                                        title=\"Post\">Cancel</a>\n                                    <a className=\"link dim dark-gray f6 f4-ns dib mr3 mr4-ns pa2\" \n                                        onClick={this.updateMemory}\n                                        href=\"#\" \n                                        title=\"Post\">Update</a>\n                                    <a  onClick={this.handleDeleteMemory}\n                                        className=\"link dim dark-gray f6 f4-ns dib\" \n                                        href=\"#\" \n                                        title=\"Login\">Delete</a>\n                                </div>\n                        </nav>\n                \n                    \n                <Container fluid>\n                   <Row>\n                        <Col xs={5} float='center'>\n                            <Carousel \n                                className='ba pa2 br3' \n                                autoPlay={false} \n                                interval={1200000}\n                                >\n                                {\n                                    this.state.memfiles.map((item,i) => {\n                                    return (\n                                        <Carousel.Item>\n                                            <MemoryImage\n                                                key={i} \n                                                index={i}\n                                                fileurl={item.fileurl}\n                                            />\n                                        </Carousel.Item>\n                                        )\n                                    })\n                                }\n                                \n                            </Carousel>\n                        </Col>\n                        <Col>\n                            <div class ='ba pa2 br3'>\n                            <Form > \n                               {upperform}\n                               {lowerform}\n                               \n                            </Form>\n                            </div>\n                        </Col>\n                        <Col>\n                            <Carousel \n                                className='ba pa2 br3 ' \n                                interval={1200000}\n                                nextIcon = {<Icon icon={ICONS.CHEVRON_RIGHT}/>}\n                                prevIcon = {<Icon icon={ICONS.CHEVRON_LEFT}/>}\n                            >\n                                {\n                                    \n                                    this.state.memfiles.map((item,i) => {\n                                    return (\n                                        <Carousel.Item>\n                                            <BaseCard\n                                                key = {i}\n                                                memory={this.state}\n                                            /> \n                                        </Carousel.Item>\n                                        \n                                        )\n                                    })\n                                \n                                }\n                                    \n                            </Carousel>\n                            \n                        </Col>\n                    </Row>                 \n                </Container>   \n            </div>  \n            )\n        }else{\n            return (\n                <div>                \n                    No Memory To Display\n                    \n                </div>   \n            )\n\n        }\n    }\n\n}\n        \n//------------------------------------------------------------------------    \n\n\n\nexport default MemoryEditor;\n"]},"metadata":{},"sourceType":"module"}